"use strict";(self.webpackChunkdicoding_story_app=self.webpackChunkdicoding_story_app||[]).push([[524],{91:(t,e,r)=>{const n={BASE_URL:"https://story-api.dicoding.dev/v1",MAP_API_KEY:"ycYnjQnQjaybWkdGWhCZ",MAP_TILE_LAYER_URL:"https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key={apiKey}",MAP_TILE_LAYER_URL_SATELITE:"https://api.maptiler.com/maps/satellite/{z}/{x}/{y}.jpg?key={apiKey}"};var o="auth:login",i="auth:logout",a={events:{},on:function(t,e){"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))},dispatch:function(t,e){var r=this.events[t];r&&r.length>0&&r.forEach((function(t){try{t(e)}catch(t){}}))},off:function(t,e){var r=this.events[t];r&&(this.events[t]=r.filter((function(t){return t!==e})))}};Object.freeze(a);const c=a;function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}var f="dicoding_story_auth_token",h="dicoding_story_user_info";function p(t){if(t)try{localStorage.setItem(f,t)}catch(t){}}function d(){try{return localStorage.getItem(f)}catch(t){return null}}function y(t){if(t&&"object"===l(t)&&t.userId&&t.name)try{localStorage.setItem(h,JSON.stringify(t)),c.dispatch(o,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t))}catch(t){}}function v(){try{var t=localStorage.getItem(h);if(!t)return null;try{return JSON.parse(t)}catch(t){return m(),null}}catch(t){return null}}function m(){try{localStorage.removeItem(h)}catch(t){}}function g(){return!!d()}function b(){var t=v();!function(){try{localStorage.removeItem(f)}catch(t){}}(),m(),c.dispatch(i,{lastUser:t}),location.hash="#/login"}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(){k=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var E={};s(E,a,(function(){return this}));var L=Object.getPrototypeOf,x=L&&L(L(A([])));x&&x!==r&&n.call(x,a)&&(E=x);var S=b.prototype=m.prototype=Object.create(E);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==w(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(w(e)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},_(j.prototype),s(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(S),s(S,u,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_(i,n,o,a,c,"next",t)}function c(t){_(i,n,o,a,c,"throw",t)}a(void 0)}))}}var O=n.BASE_URL,P={REGISTER:"".concat(O,"/register"),LOGIN:"".concat(O,"/login"),GET_STORIES:"".concat(O,"/stories"),ADD_STORY:"".concat(O,"/stories"),GET_STORY_DETAIL:function(t){return"".concat(O,"/stories/").concat(t)}};function T(t){return I.apply(this,arguments)}function I(){return I=j(k().mark((function t(e){var r,n,o,i,a,c,u,s,l,f,h,p,d=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},n=new AbortController,o=setTimeout((function(){n.abort()}),15e3),t.prev=4,t.next=7,fetch(e,x(x({},r),{},{signal:n.signal}));case 7:if(i=t.sent,clearTimeout(o),204!==i.status){t.next=12;break}return t.abrupt("return",{error:!1,message:"Operasi berhasil."});case 12:return t.prev=12,t.next=15,i.json();case 15:c=t.sent,t.next=28;break;case 18:if(t.prev=18,t.t0=t.catch(12),i.ok){t.next=26;break}return t.next=24,i.text().catch((function(){return"Server error ".concat(i.status)}));case 24:throw u=t.sent,new Error("Server error (".concat(i.status,"): ").concat(u.substring(0,100)));case 26:c={error:!1,message:"Respons sukses namun body kosong atau tidak valid.",data:null};case 28:if(i.ok){t.next=35;break}throw l=(null===(s=c)||void 0===s?void 0:s.message)||i.statusText,f=i.status,h=l||"Terjadi kesalahan (".concat(f,")"),f>=500?h="Terjadi masalah pada server (".concat(f,"). Mohon coba beberapa saat lagi."):401===f?h="Akses ditolak (401). Sesi Anda mungkin berakhir, silakan login kembali.":400===f?h="Input tidak valid: ".concat(l):404===f?h="Sumber tidak ditemukan (".concat(f,")."):413===f&&(h="Ukuran file terlalu besar (".concat(f,"). Pastikan gambar tidak melebihi 1MB.")),new Error(h);case 35:if(!0!==(null===(a=c)||void 0===a?void 0:a.error)){t.next=38;break}throw new Error(c.message||"Terjadi kesalahan pada server.");case 38:return t.abrupt("return",c);case 42:throw t.prev=42,t.t1=t.catch(4),clearTimeout(o),p="Terjadi kesalahan: ".concat(t.t1.message),"AbortError"===t.t1.name?p="Permintaan ke server terlalu lama. Periksa koneksi Anda dan coba lagi.":t.t1 instanceof TypeError&&t.t1.message.includes("fetch")?p="Gagal terhubung ke server. Periksa koneksi internet Anda.":(t.t1.message.includes("Akses ditolak")||t.t1.message.includes("Input tidak valid")||t.t1.message.includes("Server error")||t.t1.message.includes("Ukuran file"))&&(p=t.t1.message),new Error(p);case 49:case"end":return t.stop()}}),t,null,[[4,42],[12,18]])}))),I.apply(this,arguments)}function C(t){return A.apply(this,arguments)}function A(){return A=j(k().mark((function t(e){var r,n,o,i,a=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},n=d(),o=e.includes("/login")||e.includes("/register"),n||o){t.next=6;break}throw new Error("Autentikasi diperlukan. Silakan login terlebih dahulu.");case 6:return i={Authorization:n?"Bearer ".concat(n):""},r.body instanceof FormData||(i["Content-Type"]="application/json"),t.abrupt("return",T(e,x(x({},r),{},{headers:x(x({},i),r.headers)})));case 9:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function M(t){return N.apply(this,arguments)}function N(){return(N=j(k().mark((function t(e){var r,n,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.name,n=e.email,o=e.password,t.abrupt("return",T(P.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:n,password:o})}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(t){return B.apply(this,arguments)}function B(){return(B=j(k().mark((function t(e){var r,n,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.email,n=e.password,t.next=3,T(P.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:n})});case 3:if((o=t.sent)&&o.loginResult){t.next=7;break}throw new Error("Format respons login tidak valid dari server.");case 7:return t.abrupt("return",o.loginResult);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return D.apply(this,arguments)}function D(){return D=j(k().mark((function t(){var e,r,n,o,i,a,c,u=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e=u.length>0&&void 0!==u[0]?u[0]:{}).page,n=void 0===r?1:r,o=e.size,i=void 0===o?10:o,a=e.location,c=new URLSearchParams({page:n,size:i,location:void 0===a?0:a}).toString(),t.abrupt("return",C("".concat(P.GET_STORIES,"?").concat(c)));case 3:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function W(t){return H.apply(this,arguments)}function H(){return(H=j(k().mark((function t(e){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}throw new Error("ID cerita diperlukan untuk mengambil detail.");case 3:return t.abrupt("return",C(P.GET_STORY_DETAIL(e)));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return U.apply(this,arguments)}function U(){return(U=j(k().mark((function t(e){var r,n,o,i,a,c;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.description,n=e.photo,o=e.lat,i=e.lon,(a=new FormData).append("description",r),a.append("photo",n),(c=function(t){return"number"==typeof t&&!isNaN(t)})(o)&&c(i)&&(a.append("lat",o),a.append("lon",i)),t.abrupt("return",C(P.ADD_STORY,{method:"POST",body:a}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function z(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function K(){K=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Y(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Y(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function V(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){V(i,n,o,a,c,"next",t)}function c(t){V(i,n,o,a,c,"throw",t)}a(void 0)}))}}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q(n.key),n)}}function Q(t){var e=function(t,e){if("object"!=Y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y(e)?e:e+""}function Z(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function X(t,e,r){return t.set(et(t,e),r),r}function tt(t,e){return t.get(et(t,e))}function et(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var rt=new WeakMap,nt=new WeakMap,ot=new WeakMap,it=new WeakMap,at=new WeakMap,ct=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,rt,[]),Z(this,nt,1),Z(this,ot,9),Z(this,it,!1),Z(this,at,!1)},e=[{key:"fetchInitialStories",value:(o=$(K().mark((function t(){var e;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,F({page:1,size:tt(ot,this),location:0});case 4:return e=t.sent,X(rt,this,e.listStory||[]),X(at,this,tt(rt,this).length<tt(ot,this)),t.abrupt("return",{stories:tt(rt,this),allLoaded:tt(at,this)});case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return o.apply(this,arguments)})},{key:"fetchMoreStories",value:(n=$(K().mark((function t(){var e,r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!tt(it,this)&&!tt(at,this)){t.next=2;break}return t.abrupt("return",{stories:[],allLoaded:tt(at,this)});case 2:return t.prev=2,X(it,this,!0),X(nt,this,tt(nt,this)+1),t.next=8,F({page:tt(nt,this),size:tt(ot,this),location:0});case 8:return e=t.sent,(r=e.listStory||[]).length>0&&X(rt,this,[].concat(z(tt(rt,this)),z(r))),X(at,this,r.length<tt(ot,this)),t.abrupt("return",{stories:r,allLoaded:tt(at,this)});case 16:throw t.prev=16,t.t0=t.catch(2),X(nt,this,tt(nt,this)-1),t.t0;case 21:return t.prev=21,X(it,this,!1),t.finish(21);case 24:case"end":return t.stop()}}),t,this,[[2,16,21,24]])}))),function(){return n.apply(this,arguments)})},{key:"getStories",value:function(){return tt(rt,this)}},{key:"resetState",value:function(){X(rt,this,[]),X(nt,this,1),X(it,this,!1),X(at,this,!1)}}],e&&J(t.prototype,e),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}(),ut=r(476);"undefined"==typeof L||(L.Icon.Default.imagePath="https://unpkg.com/leaflet@1.9.4/dist/images/");var st=null,lt=[],ft=null,ht=null;function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-6.2,106.816666],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!L)return null;var o=document.getElementById(t);if(!o)return null;if(o._leaflet_id){if(st&&"function"==typeof st.remove)try{ht&&st.hasLayer(ht)&&ht.remove(),st.remove()}catch(t){}else o.innerHTML="";st=null,ht=null,delete o._leaflet_id}o.innerHTML="";try{st=L.map(t,{center:e,zoom:r});var i=L.tileLayer(n.MAP_TILE_LAYER_URL,{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> contributors &amp; <a href="https://www.maptiler.com/">MapTiler</a>',apiKey:n.MAP_API_KEY}),a=L.tileLayer(n.MAP_TILE_LAYER_URL_SATELITE,{maxZoom:19,attribution:'&copy; <a href="https://www.maptiler.com/">MapTiler</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> contributors',apiKey:n.MAP_API_KEY});i.addTo(st);var c={Streets:i,Satellite:a};return ht=L.control.layers(c).addTo(st),lt=[],ft=null,st}catch(t){return o.innerHTML='<p class="error-message" style="padding: 10px;">Gagal memuat peta.</p>',st=null,null}}function dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!L||!st||!t)return null;var n=Array.isArray(t)?t[0]:t.lat,o=Array.isArray(t)?t[1]:t.lon||t.lng;if("number"!=typeof n||"number"!=typeof o||isNaN(n)||isNaN(o))return null;try{var i=L.marker([n,o],r).addTo(st);return e&&i.bindPopup(e,{maxWidth:250}),lt.push(i),i}catch(t){return t.message.includes("appendChild"),null}}function yt(){if(st){if(lt.forEach((function(t){if(st.hasLayer(t))try{st.removeLayer(t)}catch(t){}})),lt=[],ft&&st.hasLayer(ft))try{st.removeLayer(ft)}catch(t){}ft=null}}function vt(){return st}function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bt(n.key),n)}}function bt(t){var e=function(t,e){if("object"!=mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mt(e)?e:e+""}function wt(t,e,r){kt(t,e),e.set(t,r)}function kt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Et(t,e,r){return t.set(xt(t,e),r),r}function Lt(t,e){return t.get(xt(t,e))}function xt(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var St=new WeakMap,_t=new WeakMap,jt=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,Tt=new WeakMap,It=new WeakMap,Ct=new WeakMap,At=new WeakMap,Mt=new WeakSet,Nt=new WeakMap,Gt=function(){return t=function t(){var e,r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),kt(e=this,r=Mt),r.add(e),wt(this,St,null),wt(this,_t,null),wt(this,jt,null),wt(this,Ot,null),wt(this,Pt,null),wt(this,Tt,null),wt(this,It,null),wt(this,Ct,null),wt(this,At,null),wt(this,Nt,(function(){Lt(At,n)&&Lt(At,n).call(n)}))},e=[{key:"init",value:function(){if(xt(Mt,this,Bt).call(this),!(Lt(_t,this)&&Lt(jt,this)&&Lt(Ot,this)&&Lt(It,this)&&Lt(Tt,this)))return!1;xt(Mt,this,Ft).call(this),Lt(Ot,this).innerHTML="<small>Memuat data peta...</small>";var t=document.getElementById("story-map");return t&&this.setContentBusy(t,!0,"Memuat peta..."),!0}},{key:"removeSkeletonLoaders",value:function(){if(Lt(Ct,this)&&Lt(_t,this)){try{Lt(_t,this).removeChild(Lt(Ct,this))}catch(t){}Et(Ct,this,null),Lt(_t,this).removeAttribute("aria-busy")}}},{key:"setupMapObserver",value:function(t){var e=this;Lt(Pt,this)&&(Lt(Pt,this).disconnect(),Et(Pt,this,null)),this.removeMapInstance(),Et(Pt,this,new IntersectionObserver((function(r){r[0].isIntersecting&&(Lt(Pt,e)&&Lt(Pt,e).disconnect(),t())}),{rootMargin:"200px",threshold:.01})),Lt(jt,this)&&Lt(Pt,this).observe(Lt(jt,this))}},{key:"initMap",value:function(){try{var t="story-map",e=document.getElementById(t);return e&&this.setContentBusy(e,!1),Et(St,this,pt(t)),Lt(St,this)?(Lt(Ot,this)&&(Lt(Ot,this).innerHTML="<small>Peta siap.</small>"),!0):(Lt(Ot,this)&&(0,ut.yf)(Lt(Ot,this),"Gagal memuat peta."),!1)}catch(t){return Lt(Ot,this)&&(0,ut.yf)(Lt(Ot,this),"Gagal memuat peta."),!1}}},{key:"renderStoryItems",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Lt(_t,this)){e||(Lt(_t,this).innerHTML="");var r=document.createDocumentFragment();t.forEach((function(t){try{var e=document.createElement("story-item");e.story=t,r.appendChild(e)}catch(t){var n=document.createElement("div");n.textContent="Gagal memuat cerita.",n.className="error-message",n.style.border="1px dashed red",n.style.padding="10px",r.appendChild(n)}})),Lt(_t,this).appendChild(r),Lt(_t,this).removeAttribute("aria-busy")}}},{key:"showNoStoriesMessage",value:function(){Lt(_t,this)&&(Lt(_t,this).innerHTML='<p style="text-align: center; padding: 20px; color: #555;">Belum ada cerita untuk ditampilkan.</p>'),Lt(It,this)&&(Lt(It,this).style.display="none")}},{key:"showLoadMoreError",value:function(t){(0,ut.f1)("Gagal memuat lebih banyak cerita: ".concat(t.message))}},{key:"showLoadMoreButton",value:function(t){Lt(It,this)&&(Lt(It,this).style.display=t?"block":"none")}},{key:"setLoadMoreButtonLoading",value:function(t){Lt(Tt,this)&&(Lt(Tt,this).disabled=t,Lt(Tt,this).innerHTML=t?'<span class="spinner spinner--small"></span> Memuat...':"Muat Lebih Banyak")}},{key:"showStoryLoadError",value:function(t){if(this.removeSkeletonLoaders(),Lt(_t,this)){Lt(_t,this).innerHTML="";var e=document.createElement("div");e.style.padding="20px",e.id="story-list-error",(0,ut.yf)(e,"Gagal memuat cerita: ".concat(t.message,".")),Lt(_t,this).appendChild(e),e.focus()}Lt(Ot,this)&&(0,ut.yf)(Lt(Ot,this),"Gagal memuat data cerita."),Lt(Pt,this)&&Lt(jt,this)&&Lt(Pt,this).unobserve(Lt(jt,this)),Lt(It,this)&&(Lt(It,this).style.display="none")}},{key:"populateMapMarkers",value:function(t){if(Lt(St,this)&&t&&Lt(Ot,this)){yt();var e=0;t.forEach((function(t){var r=function(t){return"number"==typeof t&&!isNaN(t)};if(r(t.lat)&&r(t.lon))try{var n='\n            <div style="max-width:180px; font-family: var(--font-family-sans);">\n              <img src="'.concat(t.photoUrl||"images/placeholder.png",'" alt="Mini preview" width="150" style="width:100%; height:auto; margin-bottom:8px; border-radius:3px; object-fit: cover;" onerror="this.onerror=null;this.src=\'images/placeholder.png\';">\n              <strong style="display:block; margin-bottom:3px; font-size: 0.95rem; color: var(--primary-color);">').concat(t.name||"Anonim",'</strong>\n              <small style="color:var(--medium-text); display: block; font-size: 0.8rem; max-height: 3.2em; overflow: hidden;" title="').concat(t.description||"",'">').concat((t.description||"").substring(0,50),"...</small>\n            </div>");dt([t.lat,t.lon],n),e++}catch(t){}})),(0,ut.Y7)(Lt(Ot,this)),e>0?Lt(Ot,this).innerHTML="<small>".concat(e," cerita dengan lokasi ditampilkan.</small>"):t.length>0?Lt(Ot,this).innerHTML="<small><em>Tidak ada cerita dengan lokasi valid saat ini.</em></small>":Lt(Ot,this).innerHTML="<small>Peta siap.</small>"}}},{key:"removeMapInstance",value:function(){var t;if(null!==(t=Lt(St,this))&&void 0!==t&&t.remove)try{yt(),Lt(St,this).remove()}catch(t){}Et(St,this,null)}},{key:"setContentBusy",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(t){var n="content-loading-indicator",o=t.querySelector(".".concat(n));if(e)t.setAttribute("aria-busy","true"),o||((o=document.createElement("div")).className=n,o.setAttribute("role","status"),o.innerHTML="<p>".concat(r,"</p>"),t.innerHTML="",t.appendChild(o)),o.style.display="flex";else if(t.removeAttribute("aria-busy"),o)try{t.removeChild(o)}catch(t){}}}},{key:"attachLoadMoreEvent",value:function(t){Et(At,this,t),Lt(Tt,this)&&(Lt(Tt,this).removeEventListener("click",Lt(Nt,this)),Lt(Tt,this).addEventListener("click",Lt(Nt,this)))}},{key:"cleanup",value:function(){Lt(Pt,this)&&(Lt(Pt,this).disconnect(),Et(Pt,this,null)),this.removeMapInstance(),Lt(Tt,this)&&Lt(Tt,this).removeEventListener("click",Lt(Nt,this)),Et(_t,this,null),Et(jt,this,null),Et(Ot,this,null),Et(Tt,this,null),Et(It,this,null),Et(Ct,this,null),Et(At,this,null)}}],e&&gt(t.prototype,e),r&&gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Bt(){Et(_t,this,document.getElementById("stories-list")),Et(jt,this,document.getElementById("map-container-element")),Et(Ot,this,document.getElementById("map-feedback")),Et(It,this,document.getElementById("load-more-container")),Et(Tt,this,document.getElementById("load-more-button"))}function Ft(){if(Lt(_t,this)){Lt(_t,this).innerHTML="",Lt(_t,this).removeAttribute("aria-busy"),Et(Ct,this,document.createElement("div")),Lt(Ct,this).className="skeleton-container",Lt(_t,this).appendChild(Lt(Ct,this));for(var t=0;t<9;t++){var e=document.createElement("div");e.className="skeleton-item",e.innerHTML='\n        <div class="skeleton skeleton-image"></div>\n        <div class="skeleton-content">\n          <div class="skeleton skeleton-line skeleton-line--title"></div>\n          <div class="skeleton skeleton-line skeleton-line--small"></div>\n          <div class="skeleton skeleton-line skeleton-line--text"></div>\n          <div class="skeleton skeleton-line skeleton-line--text"></div>\n        </div>\n      ',Lt(Ct,this).appendChild(e)}Lt(_t,this).setAttribute("aria-busy","true")}}function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Wt(){Wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Dt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Dt(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Rt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ht(i,n,o,a,c,"next",t)}function c(t){Ht(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function Yt(t){var e=function(t,e){if("object"!=Dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dt(e)?e:e+""}function zt(t,e,r){qt(t,e),e.set(t,r)}function qt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kt(t,e){return t.get($t(t,e))}function Vt(t,e,r){return t.set($t(t,e),r),r}function $t(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Jt=new WeakMap,Qt=new WeakMap,Zt=new WeakSet,Xt=function(){return t=function t(e){var r,n,o=e.model,i=e.view;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),qt(r=this,n=Zt),n.add(r),zt(this,Jt,null),zt(this,Qt,null),Vt(Jt,this,o),Vt(Qt,this,i)},e=[{key:"init",value:(o=Rt(Wt().mark((function t(){var e=this;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Kt(Qt,this).init()){t.next=3;break}return t.abrupt("return");case 3:return Kt(Qt,this).setupMapObserver((function(){return $t(Zt,e,oe).call(e)})),t.next=6,$t(Zt,this,te).call(this);case 6:$t(Zt,this,ce).call(this);case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"cleanup",value:(n=Rt(Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Kt(Qt,this)&&Kt(Qt,this).cleanup(),Kt(Jt,this)&&Kt(Jt,this).resetState(),window.removeEventListener("beforeunload",this.cleanup),window.removeEventListener("hashchange",this.cleanup);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&Ut(t.prototype,e),r&&Ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function te(){return ee.apply(this,arguments)}function ee(){return(ee=Rt(Wt().mark((function t(){var e,r,n;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Kt(Jt,this).fetchInitialStories();case 3:e=t.sent,r=e.stories,n=e.allLoaded,Kt(Qt,this).removeSkeletonLoaders(),0===r.length?Kt(Qt,this).showNoStoriesMessage():(Kt(Qt,this).renderStoryItems(r),Kt(Qt,this).showLoadMoreButton(!n),$t(Zt,this,ie).call(this)&&$t(Zt,this,ae).call(this)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),Kt(Qt,this).showStoryLoadError(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})))).apply(this,arguments)}function re(){return ne.apply(this,arguments)}function ne(){return(ne=Rt(Wt().mark((function t(){var e,r,n;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Kt(Qt,this).setLoadMoreButtonLoading(!0),t.prev=1,t.next=4,Kt(Jt,this).fetchMoreStories();case 4:e=t.sent,r=e.stories,n=e.allLoaded,r.length>0&&(Kt(Qt,this).renderStoryItems(r,!0),$t(Zt,this,ie).call(this)&&$t(Zt,this,ae).call(this)),Kt(Qt,this).showLoadMoreButton(!n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),Kt(Qt,this).showLoadMoreError(t.t0);case 14:return t.prev=14,Kt(Qt,this).setLoadMoreButtonLoading(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})))).apply(this,arguments)}function oe(){Kt(Qt,this).initMap()&&(Kt(Jt,this).getStories().length>0&&$t(Zt,this,ae).call(this))}function ie(){return!0}function ae(){var t=Kt(Jt,this).getStories();Kt(Qt,this).populateMapMarkers(t)}function ce(){var t=this;Kt(Qt,this).attachLoadMoreEvent((function(){return $t(Zt,t,re).call(t)})),window.removeEventListener("hashchange",this.cleanup),window.removeEventListener("beforeunload",this.cleanup),window.addEventListener("hashchange",this.cleanup.bind(this),{once:!0}),window.addEventListener("beforeunload",this.cleanup.bind(this))}function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function se(){se=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ue(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ue(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function le(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function fe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){le(i,n,o,a,c,"next",t)}function c(t){le(i,n,o,a,c,"throw",t)}a(void 0)}))}}function he(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pe(n.key),n)}}function pe(t){var e=function(t,e){if("object"!=ue(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ue(e)?e:e+""}function de(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function ye(t,e){return t.get(me(t,e))}function ve(t,e,r){return t.set(me(t,e),r),r}function me(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var ge=new WeakMap,be=new WeakMap,we=new WeakMap,ke=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),de(this,ge,null),de(this,be,null),de(this,we,null),this.title="Beranda - Dicoding Story App"},e=[{key:"render",value:(i=fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container home-page" aria-labelledby="page-heading">\n        <h1 id="page-heading" tabindex="0">Cerita Terbaru</h1>\n        <div class="stories-container">\n            <div id="stories-list" class="stories-list" aria-live="polite" aria-busy="true">\n            </div>\n            <div id="load-more-container" class="load-more-container" style="display: none;">\n                <button id="load-more-button" class="button button--primary">Muat Lebih Banyak</button>\n            </div>\n            <aside class="map-container" id="map-container-element" aria-labelledby="map-heading">\n                <h2 id="map-heading">Peta Lokasi Cerita</h2>\n                <div id="story-map" role="application" aria-label="Peta lokasi cerita">\n                 <div class="content-loading-indicator" role="status">\n                     <p>Memuat peta...</p>\n                 </div>\n                </div>\n                <p id="map-feedback" style="margin-top: 10px;"><small>Peta akan dimuat...</small></p>\n            </aside>\n        </div>\n      </section>\n    ');case 2:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"afterRender",value:(o=fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ve(ge,this,new ct),ve(be,this,new Gt),ve(we,this,new Xt({model:ye(ge,this),view:ye(be,this)})),t.next=6,ye(we,this).init();case 6:case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_cleanup",value:(n=fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ye(we,this)){t.next=3;break}return t.next=3,ye(we,this).cleanup();case 3:ve(ge,this,null),ve(be,this,null),ve(we,this,null);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&he(t.prototype,e),r&&he(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i}();function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function Le(){Le=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ee(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ee(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function xe(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xe(i,n,o,a,c,"next",t)}function c(t){xe(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,je(n.key),n)}}function je(t){var e=function(t,e){if("object"!=Ee(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ee(e)?e:e+""}var Oe=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title="Tentang Storyku - Lebih Dekat dengan Cerita Anda"},e=[{key:"render",value:(o=Se(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(new Date).toLocaleString("id-ID",{dateStyle:"long",timeStyle:"short"}),t.abrupt("return",'\n      <section class="container about-page-pro" aria-labelledby="about-heading">\n        <style>\n          .about-page-pro { padding-block: var(--spacing-lg) var(--spacing-xxxl); max-width: 950px; margin-bottom: var(--spacing-xl); }\n          .about-page-pro h1 { text-align: center; color: var(--white-color); font-size: 2.6rem; margin-bottom: var(--spacing-lg); letter-spacing: -0.025em; font-weight: var(--font-weight-bold); }\n          .about-page-pro h2 { margin-top: var(--spacing-xxl); margin-bottom: var(--spacing-lg); font-size: 1.8rem; padding-bottom: var(--spacing-md); border-bottom: 2px solid var(--primary-color); color: var(--primary-color-light); display: flex; align-items: center; gap: 15px; font-weight: var(--font-weight-semibold); letter-spacing: -0.01em;}\n          .about-page-pro h2 .fa-icon { color: var(--primary-color); font-size: 1.3em; }\n          .about-page-pro h3 { font-size: 1.25rem; color: var(--secondary-color); margin-top: var(--spacing-xl); margin-bottom: var(--spacing-md); font-weight: var(--font-weight-semibold); }\n          .about-page-pro p { margin-bottom: var(--spacing-md); line-height: 1.8; color: var(--medium-text); font-size: 1.05rem; }\n          .about-page-pro .page-subtitle { font-size: 1.2em; color: var(--dark-text); margin-bottom: var(--spacing-xl); text-align: center; font-style: normal; font-weight: var(--font-weight-normal); max-width: 800px; margin-inline: auto; }\n          .about-page-pro ul:not(.social-links) { list-style: none; padding-left: 0; margin-bottom: var(--spacing-lg); }\n          .about-page-pro ul:not(.social-links) li { margin-bottom: 1em; padding-left: 35px; position: relative; line-height: 1.7; }\n          .about-page-pro ul:not(.social-links) li::before { content: \'\\f00c\'; font-family: \'Font Awesome 6 Free\'; font-weight: 900; color: var(--primary-color); position: absolute; left: 0; top: 4px; font-size: 1.1em; }\n          .about-page-pro strong { color: var(--secondary-color-light, #FEEBC8); font-weight: var(--font-weight-semibold); }\n          .about-page-pro code { background-color: var(--light-bg); padding: 3px 7px; border-radius: var(--border-radius-sm); font-family: monospace; font-size: 0.9em; border: 1px solid var(--border-color); color: var(--primary-color-light); }\n          .about-page-pro dl { margin-bottom: var(--spacing-lg); }\n          .about-page-pro dt { font-weight: var(--font-weight-bold); color: var(--primary-color-light); font-size: 1.15rem; margin-top: var(--spacing-lg); margin-bottom: var(--spacing-sm); padding-left: 10px; border-left: 3px solid var(--primary-color); }\n          .about-page-pro dd { margin-left: 25px; padding-left: 15px; border-left: 1px solid var(--border-color); color: var(--medium-text); font-size: 1rem; margin-bottom: var(--spacing-md);}\n          .about-page-pro dd ul { list-style: none; padding: 0; margin-block: var(--spacing-sm) 0; }\n          .about-page-pro dd ul li { margin-bottom: 0.7em; padding-left: 25px; }\n          .about-page-pro dd ul li::before { content: \'\\f0da\'; font-family: \'Font Awesome 6 Free\'; font-weight: 900; color: var(--medium-text); position: absolute; left: 0; top: 5px; font-size: 1em; }\n          .about-page-pro .developer-section { margin-top: var(--spacing-xxxl); padding: var(--spacing-xl) var(--spacing-lg); border-top: 1px solid var(--border-color); text-align: center; background-color: rgba(45, 55, 72, 0.3); border-radius: var(--border-radius-lg); }\n          .about-page-pro .developer-section h2 { border-bottom: none; justify-content: center; margin-bottom: var(--spacing-md); font-size: 1.6rem; color: var(--white-color);}\n          .about-page-pro .developer-intro { font-size: 1.1rem; max-width: 750px; margin-inline: auto; margin-bottom: var(--spacing-lg); color: var(--dark-text); line-height: 1.8; }\n          .about-page-pro .social-links { display: flex; justify-content: center; gap: var(--spacing-xl); list-style: none; padding: 0; margin-top: 0; }\n          .about-page-pro .social-links li { padding: 0; margin: 0; }\n          .about-page-pro .social-links li::before { content: none; }\n          .about-page-pro .social-links a { font-size: 2.2rem; color: var(--medium-text); transition: color 0.2s ease-in-out, transform 0.2s ease-in-out; display: inline-block; }\n          .about-page-pro .social-links a:hover, .about-page-pro .social-links a:focus { color: var(--primary-color); transform: scale(1.15) translateY(-2px); }\n          .about-page-pro .final-note { margin-top: var(--spacing-xxxl); font-style: normal; color: var(--medium-text); text-align: center; font-size: 1rem; line-height: 1.7;}\n          .about-page-pro .last-updated { display: block; font-size: 0.8rem; color: var(--light-text); margin-top: var(--spacing-md); }\n        </style>\n\n        <h1 id="about-heading">Storyku: Bagikan Cerita Keseruan Anda</h1>\n        <p class="page-subtitle">\n          Aplikasi web modern untuk berbagi momen, dibangun dengan semangat belajar dan teknologi terkini sebagai bagian dari program Dicoding.\n        </p>\n\n        <p class="intro-paragraph">\n          Selamat datang di dunia Storyku! Ini adalah ruang digital tempat Anda bisa dengan mudah berbagi dan menemukan cerita. Lebih dari sekadar proyek biasa, aplikasi ini adalah buah dari pembelajaran intensif di kelas <strong>Belajar Pengembangan Web Intermediate</strong> Dicoding, yang saya ikuti sebagai bagian dari program bergengsi <strong>Coding Camp 2025 powered by DBS Foundations</strong>. Tujuannya adalah menciptakan sebuah <strong>Single-Page Application (SPA)</strong> yang tidak hanya fungsional dan interaktif, tapi juga mengadopsi kekuatan <strong>Progressive Web App (PWA)</strong> untuk pengalaman yang mulus dan andal.\n        </p>\n\n        <h2><i class="fas fa-feather-alt fa-icon" aria-hidden="true"></i> Apa yang Bisa Anda Lakukan?</h2>\n        <ul>\n          <li>\n            <strong>Buat & Bagikan Cerita Anda:</strong> Tuangkan momen Anda dalam kata-kata, tambahkan foto menarik (langsung dari kamera atau pilih dari galeri), dan jika ingin, sertakan lokasi kejadian dengan mudah via peta interaktif.\n          </li>\n          <li>\n            <strong>Jelajahi Dunia Cerita:</strong> Lihat berbagai cerita yang dibagikan oleh pengguna lain dalam tampilan linimasa yang dinamis. Temukan detail menarik dan lihat lokasi cerita di peta LeafletJS.\n          </li>\n          <li>\n            <strong>Akses Aman & Terjaga:</strong> Masuk atau daftar dengan akun Anda. Sesi login Anda akan terjaga, memberikan pengalaman personal yang aman.\n          </li>\n           <li>\n            <strong>Nikmati Pengalaman Modern:</strong> Rasakan perpindahan antar halaman yang halus berkat <strong>View Transitions API</strong> dan antarmuka yang nyaman di berbagai perangkat (<strong>Mobile First & Responsif</strong>). Aplikasi ini juga dirancang dengan memperhatikan <strong>Aksesibilitas (WCAG)</strong>.\n          </li>\n        </ul>\n\n         <h2><i class="fas fa-mobile-alt fa-icon" aria-hidden="true"></i> Keunggulan Teknologi PWA</h2>\n         <ul>\n           <li>\n             <strong>Instal di Perangkat:</strong> Ingin akses cepat? Pasang Storyku ke *homescreen* Anda layaknya aplikasi native (pastikan Anda sudah menyediakan file ikonnya!).\n           </li>\n           <li>\n             <strong>Andal Saat Offline:</strong> Kehabisan kuota atau sinyal lemah? Tenang! Dengan Service Worker dan **Workbox**, Anda tetap bisa membuka aplikasi dan melihat cerita yang sudah tersimpan di halaman "Tersimpan".\n           </li>\n           <li>\n             <strong>Simpan Cerita Favorit Lokal:</strong> Gunakan tombol "Simpan Offline" untuk menyimpan cerita penting di perangkat Anda menggunakan IndexedDB (didukung <code>idb</code>). Mudah diakses kapan saja!\n           </li>\n           <li>\n             <strong>Notifikasi Instan:</strong> Dapatkan pemberitahuan *push* secara langsung (membutuhkan VAPID Key valid & dukungan API).\n           </li>\n           <li>\n             <strong>Akses Cepat via Shortcut:</strong> Langsung menuju fitur "Tambah Cerita" dari ikon aplikasi Anda (fitur opsional PWA).\n           </li>\n         </ul>\n\n\n        <h2><i class="fas fa-cogs fa-icon" aria-hidden="true"></i> Dibangun Dengan Teknologi Pilihan</h2>\n        <dl class="tech-list">\n          <dt>Fondasi Utama</dt>\n          <dd>Menggunakan teknologi web standar: HTML5, CSS3, JavaScript ES6+. Dirancang sebagai Single-Page Application (SPA) dengan pola MVP.</dd>\n\n          <dt>Interaksi Data & Hardware</dt>\n          <dd>Menggunakan Fetch API untuk berkomunikasi dengan Dicoding Story API, MediaDevices API (<code>getUserMedia</code>) untuk akses kamera, dan LocalStorage untuk data sesi sederhana.</dd>\n\n          <dt>Fitur PWA & Offline</dt>\n          <dd>Didukung oleh Service Worker API, Push API, Notifications API, IndexedDB API (via library <code>idb</code>), dan Web App Manifest.</dd>\n\n          <dt>Perkakas & Library Eksternal</dt>\n          <dd>\n            <ul>\n              <li>LeafletJS & MapTiler API: Untuk pengalaman peta yang kaya.</li>\n              <li>Workbox: Memudahkan manajemen Service Worker & strategi caching.</li>\n              <li>Font Awesome: Menyediakan ikonografi yang menarik.</li>\n              <li>Webpack & Babel: Memastikan proses build yang modern dan efisien.</li>\n              <li>NPM: Mengelola semua dependensi proyek.</li>\n            </ul>\n          </dd>\n        </dl>\n\n        <section class="developer-section" aria-labelledby="developer-heading">\n          <h2 id="developer-heading"><i class="fas fa-user-graduate fa-icon" aria-hidden="true"></i> Mengenal Pengembang</h2>\n          <p class="developer-intro">\n            Hai! Saya <strong>Aprido Ilham</strong>, mahasiswa semester 6 dari program studi <strong>Sistem Informasi</strong> di <strong>UIN Syarif Hidayatullah Jakarta</strong>. Storyku ini adalah salah satu wujud semangat belajar saya, terutama sebagai bagian dari program <strong>Coding Camp 2025 powered by DBS Foundations</strong> melalui kelas <strong>Belajar Pengembangan Web Intermediate</strong> di Dicoding. Saya sangat antusias menerapkan teknologi web modern untuk menciptakan solusi yang bermanfaat dan menarik.\n          </p>\n          <ul class="social-links">\n            <li>\n              <a href="https://linkedin.com/in/aprido-ilham-900344253" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn Aprido Ilham" title="LinkedIn Aprido Ilham">\n                <i class="fab fa-linkedin" aria-hidden="true"></i>\n              </a>\n            </li>\n            <li>\n              <a href="https://www.instagram.com/apridoilham/" target="_blank" rel="noopener noreferrer" aria-label="Instagram Aprido Ilham" title="Instagram Aprido Ilham">\n                <i class="fab fa-instagram" aria-hidden="true"></i>\n              </a>\n            </li>\n            </ul>\n        </section>\n\n        <p class="final-note">\n          Terima kasih telah menjelajahi Storyku! Proyek ini adalah bukti nyata bagaimana materi pembelajaran dapat diubah menjadi aplikasi web fungsional yang mengintegrasikan berbagai teknologi canggih.\n          <span class="last-updated">Informasi ini relevan per '.concat(e," WIB, Depok.</span>\n        </p>\n      </section>\n    "));case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=Se(Le().mark((function t(){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}],e&&_e(t.prototype,e),r&&_e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function Te(){Te=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Pe(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Pe(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ie(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ce(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ie(i,n,o,a,c,"next",t)}function c(t){Ie(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Me(n.key),n)}}function Me(t){var e=function(t,e){if("object"!=Pe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pe(e)?e:e+""}function Ne(t,e,r){Ge(t,e),e.set(t,r)}function Ge(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Be(t,e,r){return t.set(De(t,e),r),r}function Fe(t,e){return t.get(De(t,e))}function De(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var We=new WeakMap,He=new WeakMap,Re=new WeakMap,Ue=new WeakMap,Ye=new WeakMap,ze=new WeakMap,qe=new WeakMap,Ke=new WeakMap,Ve=new WeakSet,$e=new WeakMap,Je=function(){return t=function t(){var e,r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(e=this,r=Ve),r.add(e),Ne(this,We,null),Ne(this,He,null),Ne(this,Re,null),Ne(this,Ue,null),Ne(this,Ye,null),Ne(this,ze,null),Ne(this,qe,null),Ne(this,Ke,null),Ne(this,$e,function(){var t=Ce(Te().mark((function t(e){var r,o,i,a,c;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),De(Ve,n,Ze).call(n)){t.next=5;break}return(r=Fe(We,n).querySelector('.error-message[style*="block"]'))&&r.focus(),t.abrupt("return");case 5:return o=[Fe(He,n),Fe(Re,n)],(0,ut.kK)(Fe(Ye,n),Fe(Ue,n),!0,o),i=Fe(He,n).value,a=Fe(Re,n).value,t.prev=9,t.next=13,G({email:i,password:a});case 13:p((c=t.sent).token),y({userId:c.userId,name:c.name}),(0,ut.uT)("Login berhasil! Mengarahkan ke Beranda..."),location.hash="#/",t.next=26;break;case 20:t.prev=20,t.t0=t.catch(9),(0,ut.yf)(Fe(ze,n),"Login gagal: ".concat(t.t0.message)),t.t0.message.toLowerCase().includes("email")||t.t0.message.toLowerCase().includes("user not found")?((0,ut.yf)(Fe(qe,n),t.t0.message,Fe(He,n)),Fe(He,n)&&Fe(He,n).select()):t.t0.message.toLowerCase().includes("password")?((0,ut.yf)(Fe(Ke,n),t.t0.message,Fe(Re,n)),Fe(Re,n)&&Fe(Re,n).select()):Fe(ze,n).focus(),(0,ut.kK)(Fe(Ye,n),Fe(Ue,n),!1,o);case 26:case"end":return t.stop()}}),t,null,[[9,20]])})));return function(e){return t.apply(this,arguments)}}()),this.title="Login - Dicoding Story App"},e=[{key:"render",value:(o=Ce(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container auth-page" aria-labelledby="page-heading">\n        <h1 id="page-heading">Login</h1>\n        <form id="login-form" novalidate>\n          <div class="form-group">\n            <label for="email">Email:</label>\n            <input type="email" id="email" name="email" required autocomplete="email" placeholder="Masukkan alamat email" aria-describedby="email-error" aria-required="true">\n            <p id="email-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group">\n            <label for="password">Password:</label>\n            <input type="password" id="password" name="password" required autocomplete="current-password" placeholder="Masukkan password" aria-describedby="password-error" aria-required="true">\n           <p id="password-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group form-actions">\n            <button type="submit" class="button button--primary" id="login-button">\n              <i class="fas fa-sign-in-alt" aria-hidden="true"></i> Login\n            </button>\n            <div id="loading-indicator" class="loading-indicator" style="display: none;" aria-label="Loading..." role="status">\n                 <div class="spinner spinner--small" aria-hidden="true"></div> Logging in...\n            </div>\n          </div>\n           <p id="form-error-message" class="error-message" style="display: none;" role="alert" tabindex="-1"></p>\n           <p>Belum punya akun? <a href="#/register">Daftar di sini</a></p>\n        </form>\n      </section>\n    ');case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=Ce(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(De(Ve,this,Qe).call(this),Fe(We,this)){t.next=4;break}return t.abrupt("return");case 4:Fe(We,this).removeEventListener("submit",Fe($e,this)),Fe(We,this).addEventListener("submit",Fe($e,this)),Fe(He,this)&&Fe(He,this).focus();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&Ae(t.prototype,e),r&&Ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Qe(){Be(We,this,document.getElementById("login-form")),Be(He,this,document.getElementById("email")),Be(Re,this,document.getElementById("password")),Be(Ue,this,document.getElementById("login-button")),Be(Ye,this,document.getElementById("loading-indicator")),Be(ze,this,document.getElementById("form-error-message")),Be(qe,this,document.getElementById("email-error")),Be(Ke,this,document.getElementById("password-error"))}function Ze(){(0,ut.Y7)(Fe(ze,this)),(0,ut.Y7)(Fe(qe,this),Fe(He,this)),(0,ut.Y7)(Fe(Ke,this),Fe(Re,this));var t=!0;return Fe(He,this).value?Fe(He,this).checkValidity()||((0,ut.yf)(Fe(qe,this),"Format email tidak valid.",Fe(He,this)),t=!1):((0,ut.yf)(Fe(qe,this),"Email tidak boleh kosong.",Fe(He,this)),t=!1),Fe(Re,this).value?Fe(Re,this).checkValidity()||((0,ut.yf)(Fe(Ke,this),Fe(Re,this).validationMessage||"Password tidak valid.",Fe(Re,this)),t=!1):((0,ut.yf)(Fe(Ke,this),"Password tidak boleh kosong.",Fe(Re,this)),t=!1),!t&&!Fe(qe,this).textContent&&Fe(Ke,this).textContent,t}function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function tr(){tr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Xe(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xe(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function er(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function rr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){er(i,n,o,a,c,"next",t)}function c(t){er(i,n,o,a,c,"throw",t)}a(void 0)}))}}function nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,or(n.key),n)}}function or(t){var e=function(t,e){if("object"!=Xe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xe(e)?e:e+""}function ir(t,e,r){ar(t,e),e.set(t,r)}function ar(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cr(t,e,r){return t.set(sr(t,e),r),r}function ur(t,e){return t.get(sr(t,e))}function sr(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var lr=new WeakMap,fr=new WeakMap,hr=new WeakMap,pr=new WeakMap,dr=new WeakMap,yr=new WeakMap,vr=new WeakMap,mr=new WeakMap,gr=new WeakMap,br=new WeakMap,wr=new WeakSet,kr=new WeakMap,Er=function(){return t=function t(){var e,r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ar(e=this,r=wr),r.add(e),ir(this,lr,null),ir(this,fr,null),ir(this,hr,null),ir(this,pr,null),ir(this,dr,null),ir(this,yr,null),ir(this,vr,null),ir(this,mr,null),ir(this,gr,null),ir(this,br,null),ir(this,kr,function(){var t=rr(tr().mark((function t(e){var r,o,i,a,c;return tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),sr(wr,n,xr).call(n)){t.next=5;break}return(r=ur(lr,n).querySelector('.error-message[style*="block"]'))&&r.focus(),t.abrupt("return");case 5:return o=[ur(fr,n),ur(hr,n),ur(pr,n)],(0,ut.kK)(ur(yr,n),ur(dr,n),!0,o),i=ur(fr,n).value,a=ur(hr,n).value,c=ur(pr,n).value,t.prev=10,t.next=14,M({name:i,email:a,password:c});case 14:t.sent.error||((0,ut.uT)("Registrasi berhasil! Silakan login."),location.hash="#/login"),t.next=24;break;case 18:t.prev=18,t.t0=t.catch(10),(0,ut.yf)(ur(vr,n),"Registrasi gagal: ".concat(t.t0.message)),t.t0.message.toLowerCase().includes("email")?((0,ut.yf)(ur(gr,n),t.t0.message,ur(hr,n)),ur(hr,n)&&ur(hr,n).select()):ur(vr,n).focus(),(0,ut.kK)(ur(yr,n),ur(dr,n),!1,o);case 24:case"end":return t.stop()}}),t,null,[[10,18]])})));return function(e){return t.apply(this,arguments)}}()),this.title="Register - Dicoding Story App"},e=[{key:"render",value:(o=rr(tr().mark((function t(){return tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container auth-page" aria-labelledby="page-heading">\n        <h1 id="page-heading">Register</h1>\n        <form id="register-form" novalidate>\n          <div class="form-group">\n            <label for="name">Nama:</label>\n            <input type="text" id="name" name="name" required autocomplete="name" minlength="3" placeholder="Nama lengkap Anda" aria-describedby="name-error" aria-required="true">\n            <p id="name-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group">\n            <label for="email">Email:</label>\n            <input type="email" id="email" name="email" required autocomplete="email" placeholder="Alamat email valid" aria-describedby="email-error" aria-required="true">\n            <p id="email-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group">\n            <label for="password">Password:</label>\n            <input type="password" id="password" name="password" required minlength="8" autocomplete="new-password" placeholder="Minimal 8 karakter" aria-describedby="password-error password-help" aria-required="true">\n            <small id="password-help">Minimal 8 karakter.</small>\n            <p id="password-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n           <div class="form-group form-actions">\n            <button type="submit" class="button button--primary" id="register-button">\n              <i class="fas fa-user-plus" aria-hidden="true"></i> Daftar\n            </button>\n            <div id="loading-indicator" class="loading-indicator" style="display: none;" role="status">\n                 <div class="spinner spinner--small" aria-hidden="true"></div> Mendaftar...\n            </div>\n          </div>\n           <p id="form-error-message" class="error-message" style="display: none;" role="alert" tabindex="-1"></p>\n          <p>Sudah punya akun? <a href="#/login">Login di sini</a></p>\n        </form>\n      </section>\n    ');case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=rr(tr().mark((function t(){return tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(sr(wr,this,Lr).call(this),ur(lr,this)){t.next=4;break}return t.abrupt("return");case 4:ur(lr,this).removeEventListener("submit",ur(kr,this)),ur(lr,this).addEventListener("submit",ur(kr,this)),ur(fr,this)&&ur(fr,this).focus();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&nr(t.prototype,e),r&&nr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Lr(){cr(lr,this,document.getElementById("register-form")),cr(fr,this,document.getElementById("name")),cr(hr,this,document.getElementById("email")),cr(pr,this,document.getElementById("password")),cr(dr,this,document.getElementById("register-button")),cr(yr,this,document.getElementById("loading-indicator")),cr(vr,this,document.getElementById("form-error-message")),cr(mr,this,document.getElementById("name-error")),cr(gr,this,document.getElementById("email-error")),cr(br,this,document.getElementById("password-error"))}function xr(){(0,ut.Y7)(ur(vr,this)),(0,ut.Y7)(ur(mr,this),ur(fr,this)),(0,ut.Y7)(ur(gr,this),ur(hr,this)),(0,ut.Y7)(ur(br,this),ur(pr,this));var t=!0;if(ur(fr,this).checkValidity()||((0,ut.yf)(ur(mr,this),ur(fr,this).validationMessage||"Nama tidak valid.",ur(fr,this)),t=!1),ur(hr,this).checkValidity()||((0,ut.yf)(ur(gr,this),ur(hr,this).validationMessage||"Email tidak valid.",ur(hr,this)),t=!1),!ur(pr,this).checkValidity()){var e=ur(pr,this).validationMessage||"Password tidak valid.";ur(pr,this).validity.tooShort?e="Password minimal 8 karakter.":ur(pr,this).validity.valueMissing&&(e="Password tidak boleh kosong."),(0,ut.yf)(ur(br,this),e,ur(pr,this)),t=!1}return t||ur(mr,this).textContent||ur(gr,this).textContent||ur(br,this).textContent||(0,ut.yf)(ur(vr,this),"Mohon periksa isian."),t}function Sr(t){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(t)}function _r(){_r=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Sr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Sr(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function jr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pr(n.key),n)}}function Pr(t){var e=function(t,e){if("object"!=Sr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sr(e)?e:e+""}var Tr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.selectedLocation={lat:null,lon:null},this.photoFile=null},e=[{key:"submitStory",value:(n=_r().mark((function t(e){return _r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,R({description:e.description,photo:this.photoFile,lat:this.selectedLocation.lat,lon:this.selectedLocation.lon});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){jr(i,r,o,a,c,"next",t)}function c(t){jr(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"setPhotoFile",value:function(t){this.photoFile=t}},{key:"clearPhotoFile",value:function(){this.photoFile=null}},{key:"setLocation",value:function(t){this.selectedLocation=t}},{key:"hasPhoto",value:function(){return!!this.photoFile}},{key:"hasLocation",value:function(){return this.selectedLocation&&"number"==typeof this.selectedLocation.lat&&"number"==typeof this.selectedLocation.lon}}],e&&Or(t.prototype,e),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Cr(){Cr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ir(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ir(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ar(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Mr=null;function Nr(){var t;return t=Cr().mark((function t(e){var r;return Cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){t.next=4;break}return alert("Browser Anda tidak mendukung akses kamera."),t.abrupt("return",!1);case 4:if(e){t.next=7;break}return t.abrupt("return",!1);case 7:return Gr(e),t.prev=8,t.next=12,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});case 12:return Mr=t.sent,e.srcObject=Mr,t.next=16,new Promise((function(t,r){e.onloadedmetadata=function(){t()},setTimeout((function(){return r(new Error("Timeout waiting for video metadata"))}),5e3)}));case 16:return t.next=18,e.play();case 18:return t.abrupt("return",!0);case 22:return t.prev=22,t.t0=t.catch(8),r="Tidak dapat mengakses kamera. Pastikan izin diberikan.","NotAllowedError"===t.t0.name||"PermissionDeniedError"===t.t0.name?r="Anda tidak memberikan izin akses kamera.":"NotFoundError"===t.t0.name||"DevicesNotFoundError"===t.t0.name?r="Tidak ada kamera yang ditemukan di perangkat ini.":"NotReadableError"===t.t0.name||"TrackStartError"===t.t0.name?r="Kamera sedang digunakan oleh aplikasi lain atau terjadi error hardware.":t.t0.message.includes("Timeout")&&(r="Gagal memuat metadata video kamera."),alert(r),Gr(e),Mr=null,t.abrupt("return",!1);case 31:case"end":return t.stop()}}),t,null,[[8,22]])})),Nr=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ar(i,n,o,a,c,"next",t)}function c(t){Ar(i,n,o,a,c,"throw",t)}a(void 0)}))},Nr.apply(this,arguments)}function Gr(t){if(Mr&&(Mr.getTracks().forEach((function(t){t.stop()})),Mr=null),t&&t.srcObject){try{var e=t.srcObject;e&&"function"==typeof e.getTracks&&e.getTracks().forEach((function(t){return t.stop()}))}catch(t){}t.srcObject=null,t.load()}}function Br(t){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(t)}function Fr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dr(n.key),n)}}function Dr(t){var e=function(t,e){if("object"!=Br(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Br(e)?e:e+""}var Wr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=null,this.isCameraActive=!1,this.isSubmitting=!1,this.domElements={}},e=[{key:"render",value:function(){return'\n            <section class="container add-story-page" aria-labelledby="page-heading">\n                <h1 id="page-heading">Tambah Cerita Baru</h1>\n                <form id="add-story-form" novalidate>\n                    <div class="form-group">\n                        <label for="story-description">Deskripsi Cerita (Wajib):</label>\n                        <textarea id="story-description" name="description" required rows="5" placeholder="Tulis deskripsi ceritamu di sini..." aria-describedby="desc-error" aria-required="true"></textarea>\n                         <p id="desc-error" class="error-message" role="alert" style="display: none;"></p>\n                    </div>\n                    <div class="form-group">\n                        <label id="photo-label">Foto Cerita (Wajib, maks 1MB):</label>\n                        <div class="camera-controls" role="group" aria-labelledby="photo-label">\n                             <button type="button" id="start-camera-button" class="button button--secondary" aria-label="Gunakan kamera"><i class="fas fa-camera" aria-hidden="true"></i> Gunakan Kamera</button>\n                             <button type="button" id="capture-photo-button" class="button button--secondary" disabled aria-label="Ambil foto"><i class="fas fa-circle-notch" aria-hidden="true"></i> Ambil Foto</button>\n                             <button type="button" id="upload-file-button" class="button button--secondary" aria-label="Unggah foto"><i class="fas fa-upload" aria-hidden="true"></i> Unggah File</button>\n                             <input type="file" id="photo-file-input" accept="image/png, image/jpeg" style="display: none;" aria-hidden="true">\n                        </div>\n                        <div id="camera-container" class="camera-container" style="display: none; margin-top: 15px;"><video id="camera-video" playsinline muted autoplay aria-label="Pratinjau kamera"></video><canvas id="photo-canvas" style="display: none;" aria-hidden="true"></canvas></div>\n                        <img id="photo-preview" src="#" alt="Pratinjau foto cerita" style="margin-top: 15px; display: none;" />\n                        <p id="photo-error" class="error-message" role="alert" style="display: none; margin-top: 5px;"></p>\n                    </div>\n                    <div class="form-group">\n                        <label id="location-label" for="location-map">Lokasi Cerita (Opsional):</label>\n                        <p><small>Klik di peta, geser marker, atau gunakan lokasi saat ini.</small></p>\n                        <div class="location-controls">\n                            <button type="button" id="get-current-location-button" class="button button--secondary">\n                                <i class="fas fa-map-marker-alt" aria-hidden="true"></i> Gunakan Lokasi Saya\n                            </button>\n                            <span id="location-feedback" class="location-feedback" aria-live="polite"></span>\n                        </div>\n                        <div id="location-map" style="margin-top: 10px;" role="application" aria-labelledby="location-label"></div>\n                        <p id="selected-coords" style="margin-top: 10px;" aria-live="polite"></p>\n                    </div>\n                    <div class="form-actions">\n                        <button type="submit" class="button button--primary" id="submit-story-button"><i class="fas fa-share" aria-hidden="true"></i> Bagikan Cerita</button>\n                         <div id="loading-indicator" class="loading-indicator" style="display: none;" role="status"><div class="spinner spinner--small"></div> Mengirim...</div>\n                    </div>\n                    <p id="form-error-message" class="error-message" role="alert" style="display: none;" tabindex="-1"></p>\n                </form>\n            </section>\n        '}},{key:"cacheDOMElements",value:function(){this.domElements={form:document.getElementById("add-story-form"),descriptionInput:document.getElementById("story-description"),descriptionErrorElement:document.getElementById("desc-error"),videoElement:document.getElementById("camera-video"),canvasElement:document.getElementById("photo-canvas"),photoPreviewElement:document.getElementById("photo-preview"),photoFileInput:document.getElementById("photo-file-input"),photoErrorElement:document.getElementById("photo-error"),cameraContainer:document.getElementById("camera-container"),startCameraButton:document.getElementById("start-camera-button"),capturePhotoButton:document.getElementById("capture-photo-button"),uploadFileButton:document.getElementById("upload-file-button"),selectedCoordsElement:document.getElementById("selected-coords"),submitButton:document.getElementById("submit-story-button"),loadingIndicator:document.getElementById("loading-indicator"),formErrorMessageElement:document.getElementById("form-error-message"),getCurrentLocationButton:document.getElementById("get-current-location-button"),locationFeedbackElement:document.getElementById("location-feedback")}}},{key:"initMapInput",value:function(t){try{if(this.map=function(t){var e=arguments.length>2?arguments[2]:void 0,r=pt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-6.2,106.816666],13);if(!r)return null;if(r.off("click"),r.on("click",(function(t){var n=t.latlng,o=n.lat,i=n.lng;ft&&r.hasLayer(ft)&&r.removeLayer(ft),(ft=L.marker([o,i],{draggable:!0}).addTo(r)).bindPopup("Lokasi dipilih: ".concat(o.toFixed(5),", ").concat(i.toFixed(5))).openPopup(),ft.off("dragend").on("dragend",(function(t){var r=t.target,n=r.getLatLng(),o={lat:n.lat,lon:n.lng};r.setPopupContent("Lokasi dipilih: ".concat(o.lat.toFixed(5),", ").concat(o.lon.toFixed(5))).openPopup(),e&&e(o)})),e&&e({lat:o,lon:i})})),!r.getContainer().querySelector(".map-instruction-control")){var n=L.control({position:"bottomleft"});if(n.onAdd=function(t){return this._div=L.DomUtil.create("div","map-instruction map-instruction-control"),this.update(),this._div},n.update=function(){this._div.innerHTML="Klik peta / geser marker untuk pilih lokasi"},r&&r.addControl&&(n.addTo(r),!document.getElementById("map-instruction-style"))){var o=document.createElement("style");o.id="map-instruction-style",o.innerHTML=".map-instruction { padding: 6px 10px; font: 12px/1.5 Arial, Helvetica, sans-serif; background: rgba(255,255,255,0.9); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; text-align: center; color: #333; }",document.head.appendChild(o)}}return r}("location-map",void 0,t),!this.map)throw new Error("Map init returned null.");return!0}catch(t){var e=document.getElementById("location-map");return e&&(0,ut.yf)(e,"Gagal memuat peta lokasi."),!1}}},{key:"updateSelectedCoordsText",value:function(t){var e=this.domElements.selectedCoordsElement;e&&t&&"number"==typeof t.lat&&"number"==typeof t.lon?e.textContent="Lat: ".concat(t.lat.toFixed(5),", Lon: ").concat(t.lon.toFixed(5)):e&&(e.textContent="")}},{key:"updateLocationFeedback",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.domElements.locationFeedbackElement;r&&(e?r.innerHTML='<i class="fas fa-spinner fa-spin"></i> '+t:r.textContent=t)}},{key:"setGetLocationButtonState",value:function(t){var e=this.domElements.getCurrentLocationButton;e&&(e.disabled=t)}},{key:"displayPhotoPreview",value:function(t){var e=this,r=this.domElements,n=r.photoPreviewElement,o=r.photoErrorElement;if(n){var i=new FileReader;i.onload=function(t){n.src=t.target.result,n.style.display="block",n.alt="Pratinjau foto yang dipilih"},i.onerror=function(t){(0,ut.yf)(o,"Gagal membaca file gambar."),e.clearPhotoSelection()},i.readAsDataURL(t)}}},{key:"clearPhotoSelection",value:function(){var t=this.domElements,e=t.photoPreviewElement,r=t.photoFileInput,n=t.photoErrorElement;e&&(e.style.display="none",e.src="#",e.alt="Pratinjau foto cerita"),r&&(r.value=""),(0,ut.Y7)(n)}},{key:"startCamera",value:function(){var t=this,e=this.domElements,r=e.startCameraButton,n=e.cameraContainer,o=e.capturePhotoButton,i=e.videoElement;return r&&n&&o&&i?(n.style.display="block",function(t){return Nr.apply(this,arguments)}(i).then((function(e){return e?(t.isCameraActive=!0,r.innerHTML='<i class="fas fa-times"></i> Tutup Kamera',o.disabled=!1,!0):(n.style.display="none",!1)}))):Promise.reject(new Error("Missing camera elements"))}},{key:"stopCamera",value:function(){var t=this.domElements,e=t.videoElement,r=t.cameraContainer,n=t.capturePhotoButton,o=t.startCameraButton;this.isCameraActive&&e&&(Gr(e),r&&(r.style.display="none"),n&&(n.disabled=!0),o&&(o.innerHTML='<i class="fas fa-camera"></i> Gunakan Kamera'),this.isCameraActive=!1)}},{key:"capturePhotoFromCamera",value:function(){var t=this.domElements,e=t.videoElement,r=t.canvasElement;return e&&r?function(t,e){if(!t||!e)return Promise.resolve(null);if(!Mr||!t.videoWidth||t.readyState<t.HAVE_CURRENT_DATA)return Promise.resolve(null);e.width=t.videoWidth,e.height=t.videoHeight;var r=e.getContext("2d");if(!r)return Promise.resolve(null);try{r.drawImage(t,0,0,e.width,e.height)}catch(t){return Promise.resolve(null)}return new Promise((function(t,r){try{e.toBlob((function(e){if(e){var r="dicoding-story-".concat(Date.now(),".jpeg"),n=new File([e],r,{type:"image/jpeg"});t(n)}else t(null)}),"image/jpeg",.9)}catch(t){r(t)}}))}(e,r):Promise.reject(new Error("Missing video/canvas elements"))}},{key:"validateForm",value:function(){var t=this.domElements,e=t.descriptionInput,r=t.descriptionErrorElement;t.photoErrorElement,t.isCameraActive,t.uploadFileButton,t.capturePhotoButton,t.startCameraButton,this.clearAllErrors();var n=!0;return e.value.trim()||((0,ut.yf)(r,"Deskripsi cerita tidak boleh kosong.",e),n=!1),n}},{key:"validatePhoto",value:function(t){var e=this.domElements,r=e.photoErrorElement,n=(e.isCameraActive,e.uploadFileButton),o=e.capturePhotoButton,i=e.startCameraButton;return!!t||((0,ut.yf)(r,"Foto cerita wajib diisi (dari kamera atau unggah file)."),n&&o&&i&&(!this.isCameraActive&&n?n.focus():this.isCameraActive&&o?o.focus():i&&i.focus()),!1)}},{key:"setFormSubmittingState",value:function(t){var e=this.domElements,r=e.loadingIndicator,n=e.submitButton,o=e.descriptionInput,i=e.startCameraButton,a=e.capturePhotoButton,c=e.uploadFileButton,u=e.photoFileInput,s=e.getCurrentLocationButton,l=e.form,f=[o,i,a,c,u,s,n];(0,ut.kK)(r,n,t,f),this.isSubmitting=t,l&&(t?l.setAttribute("aria-busy","true"):l.removeAttribute("aria-busy"))}},{key:"showFormError",value:function(t){var e=this.domElements.formErrorMessageElement;(0,ut.yf)(e,t),e&&e.focus()}},{key:"clearAllErrors",value:function(){var t=this.domElements,e=t.formErrorMessageElement,r=t.descriptionErrorElement,n=t.descriptionInput,o=t.photoErrorElement,i=t.locationFeedbackElement;(0,ut.Y7)(e),(0,ut.Y7)(r,n),(0,ut.Y7)(o),i&&(i.textContent="")}},{key:"updateMapMarker",value:function(t,e){var r=this;if(this.map){var n=[t,e],o="Lokasi dipilih: ".concat(t.toFixed(5),", ").concat(e.toFixed(5)),i=null;if(this.map.eachLayer((function(t){t instanceof L.Marker&&t.options.draggable&&(i=t)})),i)i.setLatLng(n).setPopupContent(o).openPopup();else{var a=L.marker(n,{draggable:!0}).addTo(this.map);a.bindPopup(o).openPopup(),a.on("dragend",(function(t){var e=t.target,n=e.getLatLng(),o={lat:n.lat,lon:n.lng};r.locationChangeCallback(o),e.setPopupContent("Lokasi dipilih: ".concat(n.lat.toFixed(5),", ").concat(n.lng.toFixed(5))).openPopup()}))}this.map.setView(n,16)}}},{key:"setLocationChangeCallback",value:function(t){this.locationChangeCallback=t}},{key:"cleanup",value:function(){var t;if(this.stopCamera(),null!==(t=this.map)&&void 0!==t&&t.remove)try{this.map.remove()}catch(t){}this.map=null,this.domElements={},this.isCameraActive=!1,this.isSubmitting=!1}},{key:"focusDescription",value:function(){var t=this.domElements.descriptionInput;t&&t.focus()}}],e&&Fr(t.prototype,e),r&&Fr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Hr(t){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hr(t)}function Rr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ur(n.key),n)}}function Ur(t){var e=function(t,e){if("object"!=Hr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hr(e)?e:e+""}var Yr=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e,this.view=r},e=[{key:"init",value:function(){this.setupEventListeners(),this.setupMapInput(),this.view.focusDescription()}},{key:"setupEventListeners",value:function(){var t=this.view.domElements,e=t.form,r=t.startCameraButton,n=t.capturePhotoButton,o=t.uploadFileButton,i=t.photoFileInput,a=t.getCurrentLocationButton;e&&e.addEventListener("submit",this.handleFormSubmit.bind(this)),r&&r.addEventListener("click",this.handleStartCameraButtonClick.bind(this)),n&&n.addEventListener("click",this.handleCapturePhotoButtonClick.bind(this)),o&&i&&(o.addEventListener("click",(function(){return i.click()})),i.addEventListener("change",this.handleFileInputChange.bind(this))),a&&a.addEventListener("click",this.handleGetCurrentLocationClick.bind(this)),window.addEventListener("beforeunload",this.cleanup.bind(this)),window.addEventListener("hashchange",this.cleanup.bind(this))}},{key:"setupMapInput",value:function(){var t=this;this.view.setLocationChangeCallback((function(e){t.model.setLocation(e),t.view.updateSelectedCoordsText(e),t.view.updateLocationFeedback("")})),this.view.initMapInput((function(e){t.model.setLocation(e),t.view.updateSelectedCoordsText(e),t.view.updateLocationFeedback("")}))}},{key:"handleFormSubmit",value:function(t){var e=this;if(t.preventDefault(),!this.view.isSubmitting){var r=this.view.validateForm(),n=this.view.validatePhoto(this.model.hasPhoto());if(r&&n){var o=this.view.domElements.descriptionInput.value.trim();this.view.setFormSubmittingState(!0),this.model.submitStory({description:o}).then((function(){(0,ut.uT)("Cerita baru berhasil dibagikan!"),e.cleanup(),setTimeout((function(){location.hash="#/"}),1500)})).catch((function(t){e.view.showFormError("Gagal mengirim cerita: ".concat(t.message)),e.view.setFormSubmittingState(!1)}))}else{this.view.showFormError("Periksa kembali isian form yang wajib diisi.");var i=this.view.domElements.form.querySelector('[aria-invalid="true"]');i?i.focus():this.view.domElements.formErrorMessageElement.focus()}}}},{key:"handleStartCameraButtonClick",value:function(){var t=this,e=this.view.domElements.startCameraButton;if(e){e.disabled=!0,this.view.clearAllErrors();try{this.view.isCameraActive?this.view.stopCamera():(this.view.clearPhotoSelection(),this.model.clearPhotoFile(),this.view.startCamera().catch((function(e){t.view.showFormError("Kesalahan Kamera: ".concat(e.message)),t.view.stopCamera()})))}catch(t){this.view.showFormError("Kesalahan Kamera: ".concat(t.message)),this.view.stopCamera()}finally{e.disabled=!1}}}},{key:"handleCapturePhotoButtonClick",value:function(){var t=this,e=this.view.domElements.capturePhotoButton;e&&(e.disabled=!0,this.view.clearAllErrors(),this.view.capturePhotoFromCamera().then((function(r){r?(t.model.setPhotoFile(r),t.view.displayPhotoPreview(r),t.view.stopCamera(),t.view.focusDescription()):(t.view.showElementError(t.view.domElements.photoErrorElement,"Gagal mengambil foto dari kamera."),e.disabled=!1)})).catch((function(r){t.view.showElementError(t.view.domElements.photoErrorElement,"Error pengambilan foto: ".concat(r.message)),e.disabled=!1})))}},{key:"handleFileInputChange",value:function(t){var e,r=this.view.domElements,n=r.photoFileInput,o=r.photoErrorElement;if(null!==(e=t.target.files)&&void 0!==e&&e[0]){var i=t.target.files[0];if(this.view.clearAllErrors(),i){if(i.size>1048576)return this.view.showElementError(o,"Ukuran file melebihi ".concat(1,"MB.")),n.value="",this.view.clearPhotoSelection(),void this.model.clearPhotoFile();if(!i.type.startsWith("image/"))return this.view.showElementError(o,"File yang dipilih bukan gambar."),n.value="",this.view.clearPhotoSelection(),void this.model.clearPhotoFile();this.model.setPhotoFile(i),this.view.displayPhotoPreview(i),this.view.stopCamera(),this.view.focusDescription()}}}},{key:"handleGetCurrentLocationClick",value:function(){return navigator.geolocation?this.view.map?(this.view.updateLocationFeedback("Mencari lokasi...",!0),this.view.setGetLocationButtonState(!0),this.view.clearAllErrors(),void navigator.geolocation.getCurrentPosition(this.geolocationSuccess.bind(this),this.geolocationError.bind(this),{enableHighAccuracy:!1,timeout:15e3,maximumAge:0})):((0,ut.f1)("Peta belum siap. Silakan tunggu sebentar."),void this.view.updateLocationFeedback("Peta belum siap.")):((0,ut.f1)("Browser Anda tidak mendukung Geolocation."),void this.view.updateLocationFeedback("Geolocation tidak didukung."))}},{key:"geolocationSuccess",value:function(t){var e=this,r=t.coords.latitude,n=t.coords.longitude,o={lat:r,lon:n};this.model.setLocation(o),this.view.updateSelectedCoordsText(o),this.view.updateLocationFeedback("Lokasi ditemukan!"),this.view.setGetLocationButtonState(!1),this.view.updateMapMarker(r,n),setTimeout((function(){e.view.domElements.locationFeedbackElement&&"Lokasi ditemukan!"===e.view.domElements.locationFeedbackElement.textContent&&e.view.updateLocationFeedback("")}),2500)}},{key:"geolocationError",value:function(t){var e="Tidak dapat mengambil lokasi Anda.";switch(t.code){case t.PERMISSION_DENIED:e="Anda menolak izin akses lokasi.";break;case t.POSITION_UNAVAILABLE:e="Informasi lokasi tidak tersedia.";break;case t.TIMEOUT:e="Waktu habis saat mencoba mengambil lokasi."}this.view.updateLocationFeedback("Error: ".concat(e)),(0,ut.f1)("Gagal mendapatkan lokasi: ".concat(e)),this.view.setGetLocationButtonState(!1)}},{key:"cleanup",value:function(){window.removeEventListener("beforeunload",this.cleanup.bind(this)),window.removeEventListener("hashchange",this.cleanup.bind(this)),this.view.cleanup()}}],e&&Rr(t.prototype,e),r&&Rr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function zr(t){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zr(t)}function qr(){qr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==zr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(zr(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Kr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Vr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Kr(i,n,o,a,c,"next",t)}function c(t){Kr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jr(n.key),n)}}function Jr(t){var e=function(t,e){if("object"!=zr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zr(e)?e:e+""}var Qr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title="Tambah Cerita - Dicoding Story App",this.model=null,this.view=null,this.presenter=null},e=[{key:"render",value:(o=Vr(qr().mark((function t(){return qr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.view=new Wr,t.abrupt("return",this.view.render());case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=Vr(qr().mark((function t(){return qr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.model=new Tr,this.view.cacheDOMElements(),this.presenter=new Yr(this.model,this.view),this.presenter.init();case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&$r(t.prototype,e),r&&$r(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Zr(){var t=location.hash.slice(1);return t?t.startsWith("/")?t:"/".concat(t):"/"}const Xr=(t,e)=>e.some((e=>t instanceof e));let tn,en;const rn=new WeakMap,nn=new WeakMap,on=new WeakMap;let an={get(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return rn.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ln(t[e])},set:(t,e,r)=>(t[e]=r,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function cn(t){an=t(an)}function un(t){return(en||(en=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(fn(this),e),ln(this.request)}:function(...e){return ln(t.apply(fn(this),e))}}function sn(t){return"function"==typeof t?un(t):(t instanceof IDBTransaction&&function(t){if(rn.has(t))return;const e=new Promise(((e,r)=>{const n=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));rn.set(t,e)}(t),Xr(t,tn||(tn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,an):t)}function ln(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,r)=>{const n=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(ln(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",o),t.addEventListener("error",i)}));return on.set(e,t),e}(t);if(nn.has(t))return nn.get(t);const e=sn(t);return e!==t&&(nn.set(t,e),on.set(e,t)),e}const fn=t=>on.get(t);const hn=["get","getKey","getAll","getAllKeys","count"],pn=["put","add","delete","clear"],dn=new Map;function yn(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(dn.get(e))return dn.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,o=pn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!hn.includes(r))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return n&&(a=a.index(e.shift())),(await Promise.all([a[r](...e),o&&i.done]))[0]};return dn.set(e,i),i}cn((t=>({...t,get:(e,r,n)=>yn(e,r)||t.get(e,r,n),has:(e,r)=>!!yn(e,r)||t.has(e,r)})));const vn=["continue","continuePrimaryKey","advance"],mn={},gn=new WeakMap,bn=new WeakMap,wn={get(t,e){if(!vn.includes(e))return t[e];let r=mn[e];return r||(r=mn[e]=function(...t){gn.set(this,bn.get(this)[e](...t))}),r}};async function*kn(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const r=new Proxy(e,wn);for(bn.set(r,e),on.set(r,fn(e));e;)yield r,e=await(gn.get(r)||e.continue()),gn.delete(r)}function En(t,e){return e===Symbol.asyncIterator&&Xr(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&Xr(t,[IDBIndex,IDBObjectStore])}function Ln(t){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(t)}function xn(){xn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ln(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ln(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Sn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(r),!0).forEach((function(e){jn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ln(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function On(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){On(i,n,o,a,c,"next",t)}function c(t){On(i,n,o,a,c,"throw",t)}a(void 0)}))}}cn((t=>({...t,get:(e,r,n)=>En(e,r)?kn:t.get(e,r,n),has:(e,r)=>En(e,r)||t.has(e,r)})));var Tn="offline-stories",In=function(t,e,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),c=ln(a);return n&&a.addEventListener("upgradeneeded",(t=>{n(ln(a.result),t.oldVersion,t.newVersion,ln(a.transaction),t)})),r&&a.addEventListener("blocked",(t=>r(t.oldVersion,t.newVersion,t))),c.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),c}("storyapp-db",1,{upgrade:function(t){t.objectStoreNames.contains(Tn)||t.createObjectStore(Tn,{keyPath:"id"})}}),Cn=function(){var t=Pn(xn().mark((function t(e){var r,n,o,i,a;return xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.id){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,An(e.photoUrl);case 6:return r=t.sent,n=_n(_n({},e),{},{photoBlob:r,photoUrl:e.photoUrl}),t.next=10,In;case 10:return o=t.sent,i=o.transaction(Tn,"readwrite"),a=i.objectStore(Tn),t.next=15,a.put(n);case 15:return t.next=17,i.done;case 17:t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(3),t.t0;case 24:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),An=function(){var t=Pn(xn().mark((function t(e){var r,n;return xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.blob();case 6:return n=t.sent,t.abrupt("return",n);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),Mn=function(){var t=Pn(xn().mark((function t(){var e,r,n,o;return xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,In;case 3:return e=t.sent,r=e.transaction(Tn,"readonly"),n=r.objectStore(Tn),t.next=8,n.getAll();case 8:return o=t.sent,t.next=11,r.done;case 11:return t.abrupt("return",o);case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",[]);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),Nn=function(){var t=Pn(xn().mark((function t(e){var r,n,o,i;return xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,In;case 5:return r=t.sent,n=r.transaction(Tn,"readonly"),o=n.objectStore(Tn),t.next=10,o.get(e);case 10:return i=t.sent,t.next=13,n.done;case 13:return t.abrupt("return",i);case 17:return t.prev=17,t.t0=t.catch(2),t.abrupt("return",null);case 21:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),Gn=function(){var t=Pn(xn().mark((function t(e){var r,n,o;return xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,In;case 6:return r=t.sent,n=r.transaction(Tn,"readwrite"),o=n.objectStore(Tn),t.next=11,o.delete(e);case 11:return t.next=13,n.done;case 13:t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(3),t.t0;case 20:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}();function Bn(t){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(t)}function Fn(){Fn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Bn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Bn(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Dn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Dn(i,n,o,a,c,"next",t)}function c(t){Dn(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Hn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rn(n.key),n)}}function Rn(t){var e=function(t,e){if("object"!=Bn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bn(e)?e:e+""}var Un=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._story=null,this._isSavedOffline=!1},e=[{key:"fetchStory",value:(c=Wn(Fn().mark((function t(e){var r,n;return Fn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W(e);case 3:if(!(r=t.sent).error&&r.story){t.next=6;break}throw new Error(r.message||"Data cerita tidak ditemukan.");case 6:return this._story=r.story,t.abrupt("return",this._story);case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,this.getOfflineStory(e);case 14:if(!(n=t.sent)){t.next=19;break}return this._story=n,this._isSavedOffline=!0,t.abrupt("return",this._story);case 19:throw t.t0;case 20:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(t){return c.apply(this,arguments)})},{key:"getOfflineStory",value:(a=Wn(Fn().mark((function t(e){return Fn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nn(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(t){return a.apply(this,arguments)})},{key:"checkOfflineStatus",value:(i=Wn(Fn().mark((function t(e){var r;return Fn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Nn(e);case 3:return r=t.sent,this._isSavedOffline=!!r,t.abrupt("return",this._isSavedOffline);case 8:return t.prev=8,t.t0=t.catch(0),this._isSavedOffline=!1,t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return i.apply(this,arguments)})},{key:"saveStoryOffline",value:(o=Wn(Fn().mark((function t(){return Fn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._story){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,Cn(this._story);case 4:return this._isSavedOffline=!0,t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"deleteStoryOffline",value:(n=Wn(Fn().mark((function t(){return Fn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._story){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,Gn(this._story.id);case 4:return this._isSavedOffline=!1,t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getStory",value:function(){return this._story}},{key:"isOfflineSaved",value:function(){return this._isSavedOffline}},{key:"setStory",value:function(t){this._story=t}},{key:"setOfflineStatus",value:function(t){this._isSavedOffline=t}}],e&&Hn(t.prototype,e),r&&Hn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a,c}();function Yn(t){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(t)}function zn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(r),!0).forEach((function(e){Kn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Kn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vn(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id-ID",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};try{if(e=new Date(t),isNaN(e.getTime()))throw new Error("Invalid date value provided")}catch(t){return"Tanggal tidak valid"}try{return new Intl.DateTimeFormat(r,qn(qn({},o),n)).format(e).replace(/\./g,":")}catch(t){try{return e.toLocaleTimeString(r,qn(qn({},o),n))}catch(t){return"Error format tanggal"}}}function $n(t){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(t)}function Jn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qn(n.key),n)}}function Qn(t){var e=function(t,e){if("object"!=$n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$n(e)?e:e+""}var Zn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pageContainer=null,this._imageElement=null,this._saveOfflineButton=null,this._map=null,this._blobUrl=null},e=[{key:"getTemplate",value:function(){return'\n            <section class="container detail-story-page" id="detail-story-container" aria-live="polite" aria-busy="true">\n                <div class="content-loading-indicator" role="status">\n                    <div class="spinner" aria-hidden="true"></div>\n                    <p>Memuat detail cerita...</p>\n                </div>\n            </section>\n        '}},{key:"setUp",value:function(){return this._pageContainer=document.getElementById("detail-story-container"),this._pageContainer}},{key:"showLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Memuat detail cerita...";(0,ut.$f)(this._pageContainer,!0,t)}},{key:"hideLoading",value:function(){var t;(0,ut.$f)(this._pageContainer,!1),null===(t=this._pageContainer)||void 0===t||t.removeAttribute("aria-busy")}},{key:"showError",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error Memuat Cerita";document.title=n,(0,ut.yf)(this._pageContainer,t,null),null===(e=this._pageContainer)||void 0===e||e.removeAttribute("aria-busy");var o=null===(r=this._pageContainer)||void 0===r?void 0:r.querySelector(".error-message");o&&o.focus()}},{key:"showOfflineNotification",value:function(){(0,ut.Ds)("Menampilkan versi offline karena gagal mengambil data terbaru.","info",5e3)}},{key:"renderStoryDetails",value:function(t,e){if(t&&this._pageContainer){var r,n=t.name,o=void 0===n?"Tanpa Nama":n,i=t.description,a=void 0===i?"Tidak ada deskripsi.":i,c=t.photoUrl,u=t.photoBlob,s=t.createdAt,l=t.lat,f=t.lon,h=s?Vn(s):"Tanggal tidak tersedia",p="images/placeholder.png";u?(r=URL.createObjectURL(u),this._blobUrl=r):r=c||p;var d="number"==typeof l&&"number"==typeof f&&!isNaN(l)&&!isNaN(f),y=e?'<i class="fas fa-trash-alt"></i> Hapus dari Offline':'<i class="fas fa-save"></i> Simpan Offline',v=e?"button--danger":"button--success";this._pageContainer.innerHTML='\n          <h1 id="detail-page-heading" tabindex="-1">Cerita oleh '.concat(o," ").concat(e?'<span style="font-size: 0.7em; color: var(--medium-text); font-weight: normal;">(Offline)</span>':"",'</h1>\n          <div class="detail-story__layout">\n              <div class="detail-story__media" role="button" aria-label="Perbesar gambar cerita">\n                   <img src="').concat(r,'" alt="Gambar cerita oleh ').concat(o,'" class="detail-story__image" onerror="this.onerror=null; this.src=\'').concat(p,"'; this.alt='Gagal memuat gambar cerita oleh ").concat(o,'\';">\n              </div>\n              <div class="detail-story__content">\n                   <p class="detail-story__date" aria-label="Tanggal dibuat">\n                       <i class="far fa-calendar-alt" aria-hidden="true"></i> Dibuat pada: ').concat(h,'\n                   </p>\n                   <p class="detail-story__description">').concat(a,"</p>\n                   ").concat(d?'\n                       <div class="detail-story__location">\n                           <h2>Lokasi Cerita</h2>\n                           <div id="detail-story-map" class="detail-story__map" role="application" aria-label="Peta lokasi cerita">\n                               <div class="content-loading-indicator" role="status"><p>Memuat peta...</p></div>\n                           </div>\n                       </div>\n                   ':'\n                       <p class="detail-story__no-location">\n                           <i class="fas fa-map-marker-slash" aria-hidden="true"></i> Lokasi tidak tersedia untuk cerita ini.\n                       </p>\n                   ','\n              </div>\n          </div>\n          <div class="detail-story__actions">\n              <a href="#/" class="button button--secondary"><i class="fas fa-arrow-left" aria-hidden="true"></i> Kembali ke Beranda</a>\n              <button id="save-offline-button" class="button ').concat(v,'" aria-live="polite">\n                  ').concat(y,"\n              </button>\n          </div>\n        "),this._imageElement=this._pageContainer.querySelector(".detail-story__image"),this._saveOfflineButton=this._pageContainer.querySelector("#save-offline-button");var m=document.getElementById("detail-page-heading");m&&m.focus()}}},{key:"updatePageTitle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"(Offline) Cerita oleh ".concat(t," - Dicoding Story App"):"Cerita oleh ".concat(t," - Dicoding Story App");return document.title=e,e}},{key:"setupImageClickListener",value:function(t){var e,r=null===(e=this._imageElement)||void 0===e?void 0:e.closest(".detail-story__media");r&&(r.addEventListener("click",t),r.style.cursor="zoom-in")}},{key:"removeImageClickListener",value:function(t){var e,r=null===(e=this._imageElement)||void 0===e?void 0:e.closest(".detail-story__media");r&&(r.removeEventListener("click",t),r.style.cursor="")}},{key:"setupSaveOfflineButton",value:function(t){this._saveOfflineButton&&this._saveOfflineButton.addEventListener("click",t)}},{key:"removeSaveOfflineButtonListener",value:function(t){this._saveOfflineButton&&this._saveOfflineButton.removeEventListener("click",t)}},{key:"updateSaveButtonState",value:function(t){if(this._saveOfflineButton){var e=t?'<i class="fas fa-trash-alt"></i> Hapus dari Offline':'<i class="fas fa-save"></i> Simpan Offline',r=t?"button--danger":"button--success";this._saveOfflineButton.innerHTML=e,this._saveOfflineButton.className="button ".concat(r)}}},{key:"setSaveButtonLoading",value:function(){this._saveOfflineButton&&(this._saveOfflineButton.disabled=!0,this._saveOfflineButton.innerHTML='<span class="spinner spinner--small"></span> Memproses...')}},{key:"enableSaveButton",value:function(){this._saveOfflineButton&&(this._saveOfflineButton.disabled=!1)}},{key:"getMapContainer",value:function(){return document.getElementById("detail-story-map")}},{key:"setMapInstance",value:function(t){this._map=t}},{key:"getMapInstance",value:function(){return this._map}},{key:"setupMapLoadingIndicator",value:function(){var t=this.getMapContainer();if(t){var e=t.querySelector(".content-loading-indicator");e&&t.removeChild(e)}}},{key:"showMapError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Gagal memuat peta lokasi.",e=this.getMapContainer();e&&(0,ut.yf)(e,t)}},{key:"cleanup",value:function(){if(this._blobUrl&&(URL.revokeObjectURL(this._blobUrl),this._blobUrl=null),this._map&&"function"==typeof this._map.remove){try{this._map.remove()}catch(t){}this._map=null}this._pageContainer=null,this._imageElement=null,this._saveOfflineButton=null}}],e&&Jn(t.prototype,e),r&&Jn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Xn(t){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(t)}function to(){to=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Xn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xn(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function eo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ro(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){eo(i,n,o,a,c,"next",t)}function c(t){eo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function no(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oo(n.key),n)}}function oo(t){var e=function(t,e){if("object"!=Xn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xn(e)?e:e+""}var io=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._model=r,this._boundHandleImageClick=this._handleImageClick.bind(this),this._boundHandleSaveOfflineClick=this._handleSaveOfflineClick.bind(this),this._boundCleanup=this._cleanup.bind(this)},e=[{key:"init",value:(o=ro(to().mark((function t(e){var r,n;return to().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return this._view.hideLoading(),this._view.showError("Tidak dapat memuat cerita: ID tidak ditemukan di URL.","Error - ID Tidak Ditemukan"),t.abrupt("return");case 4:return this._view.showLoading(),t.prev=5,t.next=8,this._model.fetchStory(e);case 8:if(r=t.sent,n=this._model.isOfflineSaved(),this._view.updatePageTitle(r.name,n),!n){t.next=15;break}this._view.showOfflineNotification(),t.next=17;break;case 15:return t.next=17,this._model.checkOfflineStatus(r.id);case 17:this._view.renderStoryDetails(r,this._model.isOfflineSaved()),this._view.hideLoading(),this._view.setupImageClickListener(this._boundHandleImageClick),this._view.setupSaveOfflineButton(this._boundHandleSaveOfflineClick),r.lat&&"number"==typeof r.lat&&r.lon&&"number"==typeof r.lon&&this._initStoryMap(),this._attachCleanupListener(),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(5),this._view.hideLoading(),this._view.showError("Gagal memuat cerita: ".concat(t.t0.message,". Versi offline juga tidak ditemukan."));case 29:case"end":return t.stop()}}),t,this,[[5,25]])}))),function(t){return o.apply(this,arguments)})},{key:"_handleImageClick",value:function(t){t.stopPropagation();var e=this._model.getStory();if(e){var r=this._view._blobUrl||e.photoUrl;r&&(0,ut.Lu)(r,"Cerita oleh ".concat(e.name||"Anonim"))}}},{key:"_handleSaveOfflineClick",value:(n=ro(to().mark((function t(){var e,r;return to().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this._model.getStory())&&e.id){t.next=3;break}return t.abrupt("return");case 3:if(this._view.setSaveButtonLoading(),t.prev=4,!this._model.isOfflineSaved()){t.next=11;break}return t.next=8,this._model.deleteStoryOffline();case 8:(0,ut.uT)('Cerita "'.concat(e.name,'" dihapus dari penyimpanan offline.')),t.next=14;break;case 11:return t.next=13,this._model.saveStoryOffline();case 13:(0,ut.uT)('Cerita "'.concat(e.name,'" disimpan untuk akses offline.'));case 14:this._view.updateSaveButtonState(this._model.isOfflineSaved()),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(4),r=this._model.isOfflineSaved()?"menghapus":"menyimpan",(0,ut.f1)("Gagal ".concat(r," cerita: ").concat(t.t0.message));case 21:return t.prev=21,this._view.enableSaveButton(),this._view.updateSaveButtonState(this._model.isOfflineSaved()),t.finish(21);case 25:case"end":return t.stop()}}),t,this,[[4,17,21,25]])}))),function(){return n.apply(this,arguments)})},{key:"_initStoryMap",value:function(){var t=this._model.getStory();if(t&&"number"==typeof t.lat&&"number"==typeof t.lon){var e=this._view.getMapContainer();if(e){this._view.setupMapLoadingIndicator();try{var r=[t.lat,t.lon];if(e._leaflet_id){var n=vt();n&&"detail-story-map"===n.getContainer().id&&n.remove()}var o=pt("detail-story-map",r,15);this._view.setMapInstance(o),o?(dt(r,"Lokasi cerita oleh ".concat(t.name||"Anonim"),{draggable:!1}),o.eachLayer((function(t){t instanceof L.Marker&&t.openPopup()}))):this._view.showMapError()}catch(t){this._view.showMapError()}}}}},{key:"_attachCleanupListener",value:function(){window.removeEventListener("hashchange",this._boundCleanup),window.addEventListener("hashchange",this._boundCleanup,{once:!0})}},{key:"_cleanup",value:function(){this._view.removeImageClickListener(this._boundHandleImageClick),this._view.removeSaveOfflineButtonListener(this._boundHandleSaveOfflineClick);var t=this._view.getMapInstance();if(t&&"function"==typeof t.remove)try{t.remove()}catch(t){}else{var e=vt();if(e&&e.getContainer()&&"detail-story-map"===e.getContainer().id)try{e.remove()}catch(t){}}window.removeEventListener("hashchange",this._boundCleanup),this._view.cleanup()}}],e&&no(t.prototype,e),r&&no(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function ao(t){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(t)}function co(){co=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ao(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ao(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function uo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function so(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){uo(i,n,o,a,c,"next",t)}function c(t){uo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function lo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fo(n.key),n)}}function fo(t){var e=function(t,e){if("object"!=ao(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ao(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ao(e)?e:e+""}var ho=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title="Memuat Cerita...",this._model=new Un,this._view=new Zn,this._presenter=new io(this._view,this._model)},e=[{key:"render",value:(o=so(co().mark((function t(){return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._view.getTemplate());case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=so(co().mark((function t(){var e,r;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._view.setUp()){t.next=3;break}return t.abrupt("return");case 3:return n=void 0,o=void 0,o=Zr(),e=1===(n=o.replace(/^\/|\/$/g,"").split("/")).length&&""===n[0]?{resource:null,id:null,verb:null}:{resource:n[0]||null,id:n[1]||null,verb:n[2]||null},r=e.id,t.next=7,this._presenter.init(r);case 7:case"end":return t.stop()}var n,o}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&lo(t.prototype,e),r&&lo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function po(t){return po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(t)}function yo(){yo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==po(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(po(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function vo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function mo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vo(i,n,o,a,c,"next",t)}function c(t){vo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function go(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bo(n.key),n)}}function bo(t){var e=function(t,e){if("object"!=po(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=po(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==po(e)?e:e+""}function wo(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function ko(t,e){return t.get(Lo(t,e))}function Eo(t,e,r){return t.set(Lo(t,e),r),r}function Lo(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var xo=new WeakMap,So=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),wo(this,xo,[])},e=[{key:"loadStories",value:(o=mo(yo().mark((function t(){return yo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=Eo,t.t1=xo,t.t2=this,t.next=6,Mn();case 6:return t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),ko(xo,this).forEach((function(t){!t.photoBlob&&t.photoUrl})),t.abrupt("return",ko(xo,this));case 12:throw t.prev=12,t.t4=t.catch(0),t.t4;case 16:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return o.apply(this,arguments)})},{key:"getStories",value:function(){return ko(xo,this)}},{key:"deleteStory",value:(n=mo(yo().mark((function t(e){return yo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Gn(e);case 3:return Eo(xo,this,ko(xo,this).filter((function(t){return t.id!==e}))),t.abrupt("return",!0);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t){return n.apply(this,arguments)})},{key:"findStory",value:function(t){return ko(xo,this).find((function(e){return e.id===t}))}},{key:"isEmpty",value:function(){return 0===ko(xo,this).length}}],e&&go(t.prototype,e),r&&go(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function jo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oo(n.key),n)}}function Oo(t){var e=function(t,e){if("object"!=_o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_o(e)?e:e+""}function Po(t,e,r){To(t,e),e.set(t,r)}function To(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Io(t,e){return t.get(Ao(t,e))}function Co(t,e,r){return t.set(Ao(t,e),r),r}function Ao(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Mo=new WeakMap,No=new WeakMap,Go=new WeakSet,Bo=function(){return t=function t(){var e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),To(e=this,r=Go),r.add(e),Po(this,Mo,null),Po(this,No,{})},(e=[{key:"initializeView",value:function(t){Co(Mo,this,t)}},{key:"registerCallback",value:function(t,e){Io(No,this)[t]=e}},{key:"getTemplate",value:function(){return'\n      <section class="container offline-page" id="offline-page-container" aria-labelledby="page-heading">\n        <h1 id="page-heading">Cerita Tersimpan Offline</h1>\n         <div id="offline-stories-list" class="stories-list" aria-live="polite" aria-busy="true">\n            <div class="content-loading-indicator" role="status">\n                <div class="spinner" aria-hidden="true"></div>\n                <p>Memuat cerita tersimpan...</p>\n            </div>\n         </div>\n      </section>\n    '}},{key:"setLoadingState",value:function(t){Io(Mo,this)&&((0,ut.$f)(Io(Mo,this),t,"Memuat cerita tersimpan..."),t||Io(Mo,this).removeAttribute("aria-busy"))}},{key:"showErrorMessage",value:function(){Io(Mo,this)&&(Io(Mo,this).innerHTML='<p class="error-message" style="text-align:center; padding: 20px;">Gagal memuat data offline.</p>')}},{key:"renderStories",value:function(t){var e=this;if(Io(Mo,this))if(Io(Mo,this).innerHTML="",0!==t.length){var r=document.createDocumentFragment();t.forEach((function(t){var n=document.createElement("div");n.className="offline-story-item-wrapper";var o=document.createElement("story-item");o.story=t,n.appendChild(o);var i=document.createElement("button");i.innerHTML='<i class="fas fa-trash-alt"></i> Hapus',i.className="button button--danger button--sm offline-delete-button",i.setAttribute("aria-label","Hapus cerita offline oleh ".concat(t.name)),i.dataset.id=t.id,i.addEventListener("click",(function(t){Io(No,e).delete&&Io(No,e).delete(t)})),n.appendChild(i),r.appendChild(n)})),Io(Mo,this).appendChild(r),Ao(Go,this,Fo).call(this)}else Io(Mo,this).innerHTML='<p style="text-align: center; padding: 20px; color: var(--medium-text);">Belum ada cerita yang disimpan untuk akses offline.</p>'}},{key:"showDeleteLoading",value:function(t){t.disabled=!0,t.innerHTML='<span class="spinner spinner--small"></span> Menghapus...'}},{key:"resetDeleteButton",value:function(t){t.disabled=!1,t.innerHTML='<i class="fas fa-trash-alt"></i> Hapus'}},{key:"removeStoryElement",value:function(t){var e,r=null===(e=Io(Mo,this).querySelector('.offline-delete-button[data-id="'.concat(t,'"]')))||void 0===e?void 0:e.closest(".offline-story-item-wrapper");r&&r.remove()}},{key:"cleanup",value:function(){var t,e=null===(t=Io(Mo,this))||void 0===t?void 0:t.querySelectorAll(".offline-delete-button");null==e||e.forEach((function(t){var e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)})),Co(Mo,this,null)}}])&&jo(t.prototype,e),r&&jo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Fo(){if(!document.getElementById("offline-item-style")){var t=document.createElement("style");t.id="offline-item-style",t.innerHTML="\n          .offline-story-item-wrapper {\n              display: flex;\n              flex-direction: column;\n              gap: 0;\n              break-inside: avoid-column;\n              page-break-inside: avoid;\n              -webkit-column-break-inside: avoid;\n              margin-bottom: var(--spacing-lg);\n              position: relative;\n          }\n          .offline-story-item-wrapper story-item {\n             margin-bottom: 0 !important;\n             border-bottom-left-radius: 0;\n             border-bottom-right-radius: 0;\n             border-bottom: none;\n          }\n          .offline-delete-button {\n              border-top-left-radius: 0;\n              border-top-right-radius: 0;\n              width: 100%;\n              padding: var(--spacing-sm) var(--spacing-md);\n              font-size: 0.85rem;\n              border-top: 1px solid #6e3b3b;\n          }\n          .offline-delete-button .spinner {\n             border-left-color: white;\n          }\n      ",document.head.appendChild(t)}}function Do(t){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Do(t)}function Wo(){Wo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Do(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Do(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ho(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ro(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ho(i,n,o,a,c,"next",t)}function c(t){Ho(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Uo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yo(n.key),n)}}function Yo(t){var e=function(t,e){if("object"!=Do(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Do(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Do(e)?e:e+""}function zo(t,e,r){qo(t,e),e.set(t,r)}function qo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ko(t,e){return t.get($o(t,e))}function Vo(t,e,r){return t.set($o(t,e),r),r}function $o(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Jo=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Xo=new WeakMap,ti=new WeakSet,ei=function(){return t=function t(e,r){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),qo(n=this,o=ti),o.add(n),zo(this,Jo,null),zo(this,Qo,null),zo(this,Zo,null),zo(this,Xo,null),Vo(Jo,this,e),Vo(Qo,this,r),Vo(Zo,this,$o(ti,this,ri).bind(this)),Vo(Xo,this,this._cleanup.bind(this))},e=[{key:"initialize",value:(n=Ro(Wo().mark((function t(e){return Wo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ko(Qo,this).initializeView(e),Ko(Qo,this).registerCallback("delete",Ko(Zo,this)),Ko(Qo,this).setLoadingState(!0),t.prev=3,t.next=6,Ko(Jo,this).loadStories();case 6:Ko(Qo,this).renderStories(Ko(Jo,this).getStories()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),(0,ut.f1)("Gagal memuat cerita tersimpan."),Ko(Qo,this).showErrorMessage();case 13:return t.prev=13,Ko(Qo,this).setLoadingState(!1),$o(ti,this,oi).call(this),t.finish(13);case 17:case"end":return t.stop()}}),t,this,[[3,9,13,17]])}))),function(t){return n.apply(this,arguments)})},{key:"_cleanup",value:function(){Ko(Qo,this).cleanup(),window.removeEventListener("hashchange",Ko(Xo,this))}}],e&&Uo(t.prototype,e),r&&Uo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function ri(t){return ni.apply(this,arguments)}function ni(){return(ni=Ro(Wo().mark((function t(e){var r,n,o,i;return Wo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.currentTarget,n=r.dataset.id){t.next=4;break}return t.abrupt("return");case 4:if(o=Ko(Jo,this).findStory(n),i=o?o.name:n,!confirm('Anda yakin ingin menghapus cerita "'.concat(i,'" dari penyimpanan offline?'))){t.next=20;break}return Ko(Qo,this).showDeleteLoading(r),t.prev=8,t.next=11,Ko(Jo,this).deleteStory(n);case 11:(0,ut.uT)("Cerita berhasil dihapus dari offline."),Ko(Qo,this).removeStoryElement(n),Ko(Jo,this).isEmpty()&&Ko(Qo,this).renderStories([]),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(8),(0,ut.f1)("Gagal menghapus cerita: ".concat(t.t0.message)),Ko(Qo,this).resetDeleteButton(r);case 20:case"end":return t.stop()}}),t,this,[[8,16]])})))).apply(this,arguments)}function oi(){window.removeEventListener("hashchange",Ko(Xo,this)),window.addEventListener("hashchange",Ko(Xo,this),{once:!0})}function ii(t){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii(t)}function ai(){ai=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ii(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ii(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ci(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ui(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ci(i,n,o,a,c,"next",t)}function c(t){ci(i,n,o,a,c,"throw",t)}a(void 0)}))}}function si(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,li(n.key),n)}}function li(t){var e=function(t,e){if("object"!=ii(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ii(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ii(e)?e:e+""}function fi(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function hi(t,e){return t.get(di(t,e))}function pi(t,e,r){return t.set(di(t,e),r),r}function di(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var yi=new WeakMap,vi=new WeakMap,mi=new WeakMap,gi=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),fi(this,yi,null),fi(this,vi,null),fi(this,mi,null),this.title="Cerita Tersimpan - Dicoding Story App",pi(yi,this,new So),pi(vi,this,new Bo),pi(mi,this,new ei(hi(yi,this),hi(vi,this)))},e=[{key:"render",value:(o=ui(ai().mark((function t(){return ai().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",hi(vi,this).getTemplate());case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=ui(ai().mark((function t(){var e;return ai().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.getElementById("offline-stories-list")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,hi(mi,this).initialize(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&si(t.prototype,e),r&&si(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();const bi={"/":new ke,"/login":new Je,"/register":new Er,"/stories/add":new Qr,"/about":new Oe,"/offline":new gi,"/stories/:id":new ho};function wi(t){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wi(t)}function ki(){ki=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==wi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(wi(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ei(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Li(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ei(i,n,o,a,c,"next",t)}function c(t){Ei(i,n,o,a,c,"throw",t)}a(void 0)}))}}function xi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_i(n.key),n)}}function Si(t,e,r){return(e=_i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _i(t){var e=function(t,e){if("object"!=wi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wi(e)?e:e+""}const ji=function(){return t=function t(e){var r=e.content,n=e.drawerButton,o=e.navigationDrawer,i=e.authMenuContainer;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Si(this,"_content",null),Si(this,"_drawerButton",null),Si(this,"_navigationDrawer",null),!(r&&n&&o&&i))throw new Error("App requires content, drawerButton, navigationDrawer, and authMenuContainer elements.");this._content=r,this._drawerButton=n,this._navigationDrawer=o},e=[{key:"renderPage",value:(n=Li(ki().mark((function t(){var e,r,n,o,i,a,c,u,s=this;return ki().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Zr(),l=void 0,l=Zr(),r=l.match(/^\/stories\/([a-zA-Z0-9_-]+)$/)&&"/stories/add"!==l?"/stories/:id":(["/","/login","/register","/stories/add","/about","/stories/:id","/offline"].includes(l),l),n=bi[r],o=["/","/stories/add"],i=["/login","/register"],(a=g())||!o.includes(e)){t.next=13;break}return location.hash="#/login",(0,ut.$f)(this._content,!0,"Redirecting to login..."),document.title="Redirecting...",t.abrupt("return");case 13:if(!a||!i.includes(e)){t.next=19;break}return location.hash="#/",(0,ut.$f)(this._content,!0,"Redirecting to home..."),document.title="Redirecting...",t.abrupt("return");case 19:if(n){t.next=26;break}return this._content.innerHTML='\n          <section class="container" style="text-align: center; padding-top: 50px;">\n            <h1 id="page-heading" tabindex="-1">404 - Halaman Tidak Ditemukan</h1>\n            <p>Maaf, halaman di alamat <code style="background: #eee; padding: 2px 4px; border-radius: 3px;">'.concat(e,'</code> tidak terdaftar.</p>\n            <a href="#/" class="button" style="margin-top: 20px;">Kembali ke Beranda</a>\n          </section>'),document.title="404 - Not Found",(c=document.getElementById("page-heading"))&&c.focus(),t.abrupt("return");case 26:if(t.prev=26,!document.startViewTransition){t.next=31;break}document.startViewTransition(Li(ki().mark((function t(){return ki().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,ut.$f)(s._content,!0,"Memuat halaman..."),t.next=3,n.render();case 3:return s._content.innerHTML=t.sent,(0,ut.$f)(s._content,!1),t.next=7,n.afterRender();case 7:"function"==typeof n.attachCleanupListener&&n.attachCleanupListener(),s._content.focus({preventScroll:!0});case 10:case"end":return t.stop()}}),t)})))),t.next=41;break;case 31:return(0,ut.$f)(this._content,!0,"Memuat halaman..."),t.next=34,n.render();case 34:return this._content.innerHTML=t.sent,(0,ut.$f)(this._content,!1),t.next=38,n.afterRender();case 38:"function"==typeof n.attachCleanupListener&&n.attachCleanupListener(),this._content.focus({preventScroll:!0});case 41:t.next=51;break;case 43:t.prev=43,t.t0=t.catch(26),(0,ut.$f)(this._content,!1),this._content.innerHTML='\n            <section class="container" style="text-align: center; padding-top: 50px;">\n              <h1 id="page-heading" tabindex="-1">Oops! Terjadi Kesalahan</h1>\n              <p>Maaf, terjadi masalah saat mencoba menampilkan halaman ini. Silakan coba lagi nanti.</p>\n              <p class="error-message" style="margin-top: 10px; font-size: 0.85rem; background: #eee; padding: 5px; border-radius: 3px; display: inline-block;">Detail Error: '.concat(t.t0.message,'</p>\n              <br><a href="#/" class="button" style="margin-top: 20px;">Kembali ke Beranda</a>\n            </section>'),document.title="Error - Dicoding Story App",(u=document.getElementById("page-heading"))&&u.focus();case 51:case"end":return t.stop()}var l}),t,this,[[26,43]])}))),function(){return n.apply(this,arguments)})}],e&&xi(t.prototype,e),r&&xi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function Oi(){Oi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ti(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ti(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Pi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ti(t){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(t)}function Ii(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ci(n.key),n)}}function Ci(t){var e=function(t,e){if("object"!=Ti(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ti(e)?e:e+""}function Ai(t,e,r){return e=Bi(e),function(t,e){if(e&&("object"==Ti(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ni()?Reflect.construct(e,r||[],Bi(t).constructor):e.apply(t,r))}function Mi(t){var e="function"==typeof Map?new Map:void 0;return Mi=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(Ni())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&Gi(o,r.prototype),o}(t,arguments,Bi(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Gi(r,t)},Mi(t)}function Ni(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ni=function(){return!!t})()}function Gi(t,e){return Gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gi(t,e)}function Bi(t){return Bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bi(t)}function Fi(t,e,r){Di(t,e),e.set(t,r)}function Di(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wi(t,e,r){return t.set(Ri(t,e),r),r}function Hi(t,e){return t.get(Ri(t,e))}function Ri(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Ui=new WeakMap,Yi=new WeakMap,zi=new WeakSet,qi=new WeakMap,Ki=new WeakMap,Vi=new WeakMap,$i=new WeakMap,Ji=function(t){function e(){var t,r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Ai(this,e),Di(r=t,n=zi),n.add(r),Fi(t,Ui,null),Fi(t,Yi,null),Fi(t,qi,(function(e){if(e.stopPropagation(),Hi(Ui,t)){var r=t._objectUrl||Hi(Ui,t).photoUrl;r&&(0,ut.Lu)(r,"Cerita oleh ".concat(Hi(Ui,t).name||"Anonim"))}})),Fi(t,Ki,(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),Hi($i,t).call(t))})),Fi(t,Vi,(function(e){e.target.closest(".story-item__image-container")||Hi($i,t).call(t)})),Fi(t,$i,(function(){var e=t.dataset.id;e&&!e.startsWith("unknown-")?location.hash="#/stories/".concat(e):alert("Tidak dapat membuka detail cerita ini (ID tidak valid).")})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gi(t,e)}(e,t),r=e,n=[{key:"connectedCallback",value:function(){var t;Hi(Ui,this)&&!this.hasChildNodes()&&this.render(),this.setAttribute("role","article"),null!==(t=Hi(Ui,this))&&void 0!==t&&t.id&&this.setAttribute("aria-labelledby","story-title-".concat(Hi(Ui,this).id)),this.setAttribute("tabindex","0"),this.removeEventListener("keydown",Hi(Ki,this)),this.addEventListener("keydown",Hi(Ki,this)),this.removeEventListener("click",Hi(Vi,this)),this.addEventListener("click",Hi(Vi,this)),Ri(zi,this,Qi).call(this)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("keydown",Hi(Ki,this)),this.removeEventListener("click",Hi(Vi,this)),Ri(zi,this,Zi).call(this),this._objectUrl&&(URL.revokeObjectURL(this._objectUrl),this._objectUrl=null)}},{key:"story",get:function(){return Hi(Ui,this)},set:function(t){if(!t||"object"!==Ti(t))return Wi(Ui,this,null),void(this.isConnected&&(this.innerHTML='<p class="error-message" style="padding:10px;">Data invalid.</p>',this.removeAttribute("aria-labelledby")));Wi(Ui,this,t),this.isConnected&&(this.render(),Ri(zi,this,Qi).call(this),Hi(Ui,this).id?this.setAttribute("aria-labelledby","story-title-".concat(Hi(Ui,this).id)):this.removeAttribute("aria-labelledby"))}},{key:"render",value:(i=Oi().mark((function t(){var e,r,n,o,i,a,c,u,s,l,f,h,p,d,y,v,m,g;return Oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Hi(Ui,this)){t.next=3;break}return this.innerHTML='<p style="padding:10px;">Memuat...</p>',t.abrupt("return");case 3:if(e=Hi(Ui,this),r=e.id,n=void 0===r?"unknown-".concat(Math.random().toString(36).substring(2,8)):r,o=e.name,i=void 0===o?"Anonim":o,a=e.description,c=void 0===a?"N/A":a,u=e.photoUrl,s=e.photoBlob,l=e.createdAt,f=e.lat,h=e.lon,s?(this._objectUrl&&URL.revokeObjectURL(this._objectUrl),this._objectUrl=URL.createObjectURL(s),p=this._objectUrl):p=u||"images/placeholder.png",d="images/placeholder.png",y="N/A",!l){t.next=17;break}if(t.prev=8,!(y=Vn(l)).includes("Invalid")&&!y.includes("Error")){t.next=12;break}throw new Error;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),y="Tgl Error";case 17:v="number"==typeof f&&"number"==typeof h&&!isNaN(f)&&!isNaN(h),m=v?"Dengan Lokasi":"",g=v?"fas fa-map-marker-alt":"",this.setAttribute("data-id",n),this.innerHTML='\n            <div class="story-item__image-container" role="button" aria-label="Perbesar gambar cerita oleh '.concat(i,'">\n                <img src="').concat(p,'" \n                     alt="Cerita oleh ').concat(i,'" \n                     class="story-item__image" \n                     onerror="this.onerror=null; this.src=\'').concat(d,"'; this.alt='Gagal memuat gambar cerita oleh ").concat(i,'\';" \n                     loading="lazy">\n            </div>\n            <div class="story-item__content">\n                <div class="story-item__meta">\n                    <span class="story-item__author" id="story-title-').concat(n,'">').concat(i||"Tanpa Nama","</span>\n                    ").concat(v?'<span class="story-item__location"><i class="'.concat(g,'" aria-hidden="true"></i> ').concat(m,"</span>"):"",'\n                </div>\n                <p class="story-item__description">').concat(c,'</p>\n                <time class="story-item__timestamp" datetime="').concat(l||"",'">').concat(y,"</time>\n            </div>\n        "),Wi(Yi,this,this.querySelector(".story-item__image-container"));case 23:case"end":return t.stop()}}),t,this,[[8,14]])})),a=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){Pi(o,r,n,a,c,"next",t)}function c(t){Pi(o,r,n,a,c,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})}],n&&Ii(r.prototype,n),o&&Ii(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,i,a}(Mi(HTMLElement));function Qi(){Ri(zi,this,Zi).call(this),Hi(Yi,this)&&Hi(Yi,this).addEventListener("click",Hi(qi,this))}function Zi(){Hi(Yi,this)&&Hi(Yi,this).removeEventListener("click",Hi(qi,this))}function Xi(t){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(t)}function ta(){ta=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Xi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xi(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ea(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ra(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ea(i,n,o,a,c,"next",t)}function c(t){ea(i,n,o,a,c,"throw",t)}a(void 0)}))}}customElements.get("story-item")||customElements.define("story-item",Ji);var na=null;function oa(t,e,r){t.setAttribute("aria-hidden","true"),e.setAttribute("aria-hidden","true"),r.setAttribute("aria-expanded","false"),t.classList.remove("open"),e.classList.remove("open")}function ia(t,e){if(t&&e){t.innerHTML="",e.innerHTML="";var r="",n="";if(g()){var o=v(),i=o?o.name:"User";r='\n            <li><span class="user-greeting">Hi, <strong>'.concat(i,'</strong>!</span></li>\n            <li><button id="logout-button-desktop" class="nav-button button--logout"><i class="fas fa-sign-out-alt"></i> Logout</button></li>\n        '),n='\n            <li><span class="user-greeting--mobile">Hi, <strong>'.concat(i,'</strong>!</span></li>\n            <li><button id="logout-button-mobile" class="nav-button button--logout"><i class="fas fa-sign-out-alt"></i> Logout</button></li>\n        ')}else r='<li><a href="#/login" class="button button--outline button--sm">Login</a></li>',n='<li><a href="#/login">Login</a></li><li><a href="#/register">Register</a></li>';if(t.innerHTML=r,e.innerHTML=n,g()){var a,c,u=function(t){t.preventDefault(),confirm("Apakah Anda yakin ingin logout?")&&b()};null===(a=document.getElementById("logout-button-desktop"))||void 0===a||a.addEventListener("click",u),null===(c=document.getElementById("logout-button-mobile"))||void 0===c||c.addEventListener("click",u)}}}function aa(){var t=document.querySelectorAll(".nav-item--auth-required"),e=g();t.forEach((function(t){t.style.display=e?"":"none"}))}function ca(){var t=document.querySelector(".skip-link"),e=document.querySelector("#main-content");t&&e&&(t.removeEventListener("click",ua),t.addEventListener("click",ua))}function ua(t){t.preventDefault();var e=document.querySelector("#main-content");e&&e.focus()}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector("#main-content"),e=document.querySelector("#drawer-button"),n=document.querySelector("#navigation-drawer"),a=document.querySelector("#auth-menu-container"),u=document.querySelector("#mobile-drawer"),s=document.querySelector("#mobile-auth-menu-container"),l=document.querySelector("#mobile-drawer-close"),f=document.querySelector("#drawer-overlay");if(t&&e&&n&&a&&u&&s&&l&&f){var h,p,d,y;(0,ut.xQ)(),function(){var t=document.querySelector(".clock__time"),e=document.querySelector(".clock__date");function r(){if(t&&e){var r=new Date,n=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0"),i=String(r.getSeconds()).padStart(2,"0");t.textContent="".concat(n,":").concat(o,":").concat(i);var a={weekday:"long",year:"numeric",month:"long",day:"numeric"};try{e.textContent=r.toLocaleDateString("id-ID",a)}catch(t){e.textContent=r.toLocaleDateString("en-US",a)}}}na&&clearInterval(na);r(),na=setInterval(r,1e3)}(),p=u,d=l,y=f,(h=e).addEventListener("click",(function(t){t.stopPropagation(),function(t,e,r){t.setAttribute("aria-hidden","false"),e.setAttribute("aria-hidden","false"),r.setAttribute("aria-expanded","true"),t.classList.add("open"),e.classList.add("open")}(p,y,h)})),d.addEventListener("click",(function(){oa(p,y,h)})),y.addEventListener("click",(function(){oa(p,y,h)})),p.addEventListener("click",(function(t){t.target.matches("a")&&oa(p,y,h)}));var v=new ji({content:t,drawerButton:e,navigationDrawer:n,authMenuContainer:a});c.on(o,(function(t){ia(a,s),aa()})),c.on(i,(function(){ia(a,s),aa()}));var m=function(){var t=ra(ta().mark((function t(){var e;return ta().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ia(a,s),aa(),t.next=4,v.renderPage();case 4:return ca(),window.removeEventListener("hashchange",g),window.addEventListener("hashchange",g),t.next=10,r.e(177).then(r.bind(r,177));case 10:return e=t.sent.default,t.next=13,e();case 13:t.next=16;break;case 15:case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=ra(ta().mark((function t(){return ta().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return oa(u,f,e),t.next=4,v.renderPage();case 4:window.scrollTo(0,0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();m()}}))},476:(t,e,r)=>{function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];t&&e&&(t.style.display=r?"inline-flex":"none",e.disabled=r,r?(e.setAttribute("aria-busy","true"),e.dataset.originalText||(e.dataset.originalText=e.innerHTML)):e.removeAttribute("aria-busy"),n.forEach((function(t){t&&void 0!==t.disabled&&(t.disabled=r)})))}function a(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t)if(t.textContent=e,t.style.display="block",t.setAttribute("tabindex","-1"),t.getAttribute("role")||t.setAttribute("role","alert"),r&&"function"==typeof r.focus&&null!==r.offsetParent){if(r.focus(),("INPUT"===r.tagName||"TEXTAREA"===r.tagName||"SELECT"===r.tagName)&&(r.setAttribute("aria-invalid","true"),t.id)){var o=r.getAttribute("aria-describedby"),i=o?"".concat(o," ").concat(t.id):t.id,a=n(new Set(i.split(" "))).join(" ");r.setAttribute("aria-describedby",a)}}else t.focus();else u(e,"error")}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&(t.textContent="",t.style.display="none",t.removeAttribute("role"),t.removeAttribute("tabindex"),e&&(e.removeAttribute("aria-invalid"),t.id))){var r=e.getAttribute("aria-describedby");if(r){var n=r.split(" ").filter((function(e){return e!==t.id})).join(" ");n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")}}}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n=document.getElementById("notification-container");if(n){var o=document.createElement("div");o.className="toast-notification toast--".concat(e),o.setAttribute("role","status"),o.setAttribute("aria-live","polite");var i="fas fa-info-circle";"success"===e?i="fas fa-check-circle":"error"===e&&(i="fas fa-exclamation-circle"),o.innerHTML='\n          <i class="'.concat(i,'" aria-hidden="true"></i>\n          <span>').concat(t,'</span>\n          <button class="close-button" aria-label="Tutup notifikasi">&times;</button>\n      '),n.appendChild(o);var a=function(){o.classList.remove("show"),o.addEventListener("transitionend",(function(){try{n.removeChild(o)}catch(t){}}),{once:!0})};requestAnimationFrame((function(){setTimeout((function(){o.classList.add("show")}),10)}));var c=setTimeout(a,r);o.querySelector(".close-button").addEventListener("click",(function(){clearTimeout(c),a()}))}else alert("".concat(e.toUpperCase(),": ").concat(t))}function s(t){u(t,"success",arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3)}function l(t){u(t,"error",arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3)}function f(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Memuat data...";if(t){var n="content-loading-indicator",o=t.querySelector(".".concat(n));if(e)t.setAttribute("aria-busy","true"),t.setAttribute("aria-label",r),o||((o=document.createElement("div")).className=n,o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),o.innerHTML='\n                 <div class="spinner" aria-hidden="true"></div>\n                 <p>'.concat(r,"</p>\n             "),t.innerHTML="",t.appendChild(o)),o.style.display="flex";else if(t.removeAttribute("aria-busy"),t.removeAttribute("aria-label"),o)try{t.removeChild(o)}catch(t){}}}r.d(e,{$f:()=>f,Ds:()=>u,Lu:()=>b,Y7:()=>c,f1:()=>l,kK:()=>i,uT:()=>s,xQ:()=>g,yf:()=>a});var h=null,p=null,d=null,y=null,v=null;function m(){(h=document.getElementById("image-modal"))&&(p=h.querySelector(".image-modal__image"),d=h.querySelector(".image-modal__caption"),y=h.querySelector(".image-modal__close"))}function g(){m(),h&&y&&(y.addEventListener("click",w),h.addEventListener("click",(function(t){t.target===h&&w()})),h.addEventListener("keydown",(function(t){"Escape"===t.key&&w()})))}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(h&&p&&d||(m(),h&&p&&d))&&(v=document.activeElement,p.src=t||"",p.alt=e||"Gambar cerita",d.textContent=e||"",h.setAttribute("aria-hidden","false"),y?y.focus():h.focus())}function w(){h&&(h.setAttribute("aria-hidden","true"),v&&"function"==typeof v.focus&&v.focus(),v=null)}}},t=>{var e;e=91,t(t.s=e)}]);
//# sourceMappingURL=app.9c0646bb79f54b769530.bundle.js.map